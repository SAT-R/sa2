/* unofficial gameplaySP kai
 *
 * Copyright (C) 2006 Exophase <exophase@gmail.com>
 * Copyright (C) 2007 takka <takka@tfact.net>
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of
 * the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
 */

#include "global.h"
#include <string.h>

#define LIMIT_MAX(x, y) (((x) > (y)) ? (x) : (y))
#define LIMIT_MIN(x, y) (((x) < (y)) ? (x) : (y))
// #define LIMIT_MAX(input, maxout) __builtin_allegrex_min(input, maxout)

// #define LIMIT_MIN(input, minout) __builtin_allegrex_max(input, minout)

#define GBA_SCREEN_WIDTH  (240)
#define GBA_SCREEN_HEIGHT (160)
//#define GBA_SCREEN_WIDTH  (256)
//#define GBA_SCREEN_HEIGHT (256)
#define GBA_LINE_SIZE (240)

#define pIO_REG(val) (*(u16 *)(val))

void update_scanline(void);

void clear_texture(u16 color);

extern s32 affine_reference_x[2];
extern s32 affine_reference_y[2];

typedef void (*tile_render_function)(u32 layer_number, u32 start, u32 end, void *dest_ptr);
typedef void (*bitmap_render_function)(u32 start, u32 end, void *dest_ptr);

typedef struct {
    tile_render_function normal_render_base;
    tile_render_function normal_render_transparent;
    tile_render_function alpha_render_base;
    tile_render_function alpha_render_transparent;
    tile_render_function color16_render_base;
    tile_render_function color16_render_transparent;
    tile_render_function color32_render_base;
    tile_render_function color32_render_transparent;
} TileLayerRenderStruct;

typedef struct {
    bitmap_render_function normal_render;
} BitmapLayerRenderStruct;

void video_write_savestate(void);
void video_read_savestate(void);

#define render_scanline_dest_normal        u16
#define render_scanline_dest_alpha         u32
#define render_scanline_dest_alpha_obj     u32
#define render_scanline_dest_color16       u16
#define render_scanline_dest_color32       u32
#define render_scanline_dest_partial_alpha u32
#define render_scanline_dest_copy_tile     u16
#define render_scanline_dest_copy_bitmap   u16

#define ALIGN_DATA __attribute__((aligned(64)))

s32 ALIGN_DATA affine_reference_x[2];
s32 ALIGN_DATA affine_reference_y[2];

extern uint16_t gameImage[DISPLAY_WIDTH * DISPLAY_HEIGHT];

extern uint8_t EWRAM_START[EWRAM_SIZE];
extern uint8_t IWRAM_START[IWRAM_SIZE];
extern uint16_t PLTT[PLTT_SIZE / sizeof(uint16_t)];
extern uint8_t VRAM[VRAM_SIZE];
extern uint16_t OAM[OAM_SIZE / 2];

#define render_scanline_dest_normal        u16
#define render_scanline_dest_alpha         u32
#define render_scanline_dest_alpha_obj     u32
#define render_scanline_dest_color16       u16
#define render_scanline_dest_color32       u32
#define render_scanline_dest_partial_alpha u32
#define render_scanline_dest_copy_tile     u16
#define render_scanline_dest_copy_bitmap   u16

s32 ALIGN_DATA affine_reference_x[2];
s32 ALIGN_DATA affine_reference_y[2];

static u16 *screen_texture = (u16 *)(gameImage);

typedef struct {
    u16 u, v;
    u16 x, y, z;
} Vertex;

typedef struct {
    u16 color;
    u16 x, y, z;
} VertexLineCol16;

typedef struct {
    u32 color;
    u16 x, y, z;
} VertexLineCol32;

// Map widths and heights
const u16 ALIGN_DATA map_widths[] = { 256, 512, 256, 512 };
// const u16 ALIGN_DATA map_heights[] = { 256, 256, 512, 512 };

const u8 ALIGN_DATA obj_width_table[] = { 8, 16, 32, 64, 16, 32, 32, 64, 8, 8, 16, 32 };

const u8 ALIGN_DATA obj_height_table[] = { 8, 16, 32, 64, 8, 8, 16, 32, 16, 32, 32, 64 };

u8 ALIGN_DATA obj_priority_list[5][160][128];
u8 ALIGN_DATA obj_priority_count[5][160];
u8 ALIGN_DATA obj_alpha_count[160];

u8 ALIGN_DATA layer_order[16];
u32 layer_count;

const u8 ALIGN_DATA active_layers[8] = { 0x1F, 0x17, 0x1C, 0x14, 0x14, 0x14, 0x00, 0x00 };
static void render_scanline_text_base_normal(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_transparent_normal(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_base_color16(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_transparent_color16(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_base_color32(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_transparent_color32(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_base_alpha(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_text_transparent_alpha(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_base_normal(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_transparent_normal(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_base_color16(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_transparent_color16(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_base_color32(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_transparent_color32(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_base_alpha(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_affine_transparent_alpha(u32 layer, u32 start, u32 end, void *scanline);
static void render_scanline_bitmap_mode3_normal(u32 start, u32 end, void *scanline);
static void render_scanline_bitmap_mode4_normal(u32 start, u32 end, void *scanline);
static void render_scanline_bitmap_mode5_normal(u32 start, u32 end, void *scanline);
static void render_scanline_obj_normal_1D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_normal_2D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_color16_1D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_color16_2D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_color32_1D(u32 priority, u32 start, u32 end, u32 *scanline);
static void render_scanline_obj_color32_2D(u32 priority, u32 start, u32 end, u32 *scanline);
static void render_scanline_obj_alpha_obj_1D(u32 priority, u32 start, u32 end, u32 *scanline);
static void render_scanline_obj_alpha_obj_2D(u32 priority, u32 start, u32 end, u32 *scanline);
static void render_scanline_obj_partial_alpha_1D(u32 priority, u32 start, u32 end, u32 *scanline);
static void render_scanline_obj_partial_alpha_2D(u32 priority, u32 start, u32 end, u32 *scanline);
static void render_scanline_obj_copy_tile_1D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_copy_tile_2D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_copy_bitmap_1D(u32 priority, u32 start, u32 end, u16 *scanline);
static void render_scanline_obj_copy_bitmap_2D(u32 priority, u32 start, u32 end, u16 *scanline);
static void fill_line_normal(u16 color, u16 *dest_ptr, u32 start, u32 end);
static void fill_line_alpha(u16 color, u32 *dest_ptr, u32 start, u32 end);
static void fill_line_color16(u16 color, u16 *dest_ptr, u32 start, u32 end);
static void fill_line_color32(u16 color, u32 *dest_ptr, u32 start, u32 end);
static void expand_blend(u32 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end);
static void expand_darken(u16 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end);
static void expand_brighten(u16 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end);
static void expand_darken_partial_alpha(u32 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end);
static void expand_brighten_partial_alpha(u32 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end);
static void render_scanline_tile(u16 *scanline, u16 dispcnt);
static void render_scanline_bitmap(u16 *scanline, u16 dispcnt);
static void render_scanline_window_tile(u16 *scanline, u16 dispcnt);
static void render_scanline_window_bitmap(u16 *scanline, u16 dispcnt);

static void render_scanline_conditional_tile(u32 start, u32 end, u16 *scanline, u8 enable_flags, u16 dispcnt, u16 bldcnt,
                                             TileLayerRenderStruct *layer_renderers);
static void render_scanline_conditional_bitmap(u32 start, u32 end, u16 *scanline, u8 enable_flags, u16 dispcnt, u16 bldcnt,
                                               BitmapLayerRenderStruct *layer_renderers);

static void order_obj(u8 video_mode);
static void order_layers(u8 layer_flags);

static void render_scanline_text_base_normal(u32 layer, u32 start, u32 end, void *scanline)
{
    u16 *palette = PLTT;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                current_pixel = current_pixels & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                                ;
                                current_pixel = current_pixels >> 24;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                current_pixel = current_pixels & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                                ;
                                current_pixel = current_pixels >> 24;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 3] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 0] = current_pixel;
                        ;
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 3] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 0] = current_pixel;
                        ;
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 0] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 3] = current_pixel;
                        ;
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 0] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 3] = current_pixel;
                        ;
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 3] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 2] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 1] = current_pixel;
                            ;
                            ;
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 0] = current_pixel;
                            ;
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0] = current_pixel;
                            ;
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 0] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 1] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 2] = current_pixel;
                            ;
                            ;
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 3] = current_pixel;
                            ;
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0] = current_pixel;
                            ;
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 3] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 2] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 1] = current_pixel;
                            ;
                            ;
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 0] = current_pixel;
                            ;
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 0] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 1] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 2] = current_pixel;
                            ;
                            ;
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 3] = current_pixel;
                            ;
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 3] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 0] = current_pixel;
                        ;
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 3] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 0] = current_pixel;
                        ;
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 0] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 3] = current_pixel;
                        ;
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 0] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 3] = current_pixel;
                        ;
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 3] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 0] = current_pixel;
                        ;
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 3] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 0] = current_pixel;
                        ;
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 0] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[0 + 3] = current_pixel;
                        ;
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 0] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 1] = current_pixel;
                        ;
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 2] = current_pixel;
                        ;
                        ;
                        current_pixel = current_pixels >> 24;
                        current_pixel = palette[current_pixel];
                        dest_ptr[4 + 3] = current_pixel;
                        ;
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 3] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 2] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 1] = current_pixel;
                            ;
                            ;
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 0] = current_pixel;
                            ;
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0] = current_pixel;
                            ;
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 0] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 1] = current_pixel;
                            ;
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 2] = current_pixel;
                            ;
                            ;
                            current_pixel = current_pixels >> 24;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0 + 3] = current_pixel;
                            ;
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            current_pixel = palette[current_pixel];
                            dest_ptr[0] = current_pixel;
                            ;
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                } else {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                } else {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                } else {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                } else {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            ;
                        } else {
                            current_pixel = palette[0];
                            dest_ptr[0] = current_pixel;
                            dest_ptr[1] = current_pixel;
                            dest_ptr[2] = current_pixel;
                            dest_ptr[3] = current_pixel;
                            dest_ptr[4] = current_pixel;
                            dest_ptr[5] = current_pixel;
                            dest_ptr[6] = current_pixel;
                            dest_ptr[7] = current_pixel;
                            ;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                            ;
                        } else {
                            current_pixel = palette[0];
                            dest_ptr[0] = current_pixel;
                            dest_ptr[1] = current_pixel;
                            dest_ptr[2] = current_pixel;
                            dest_ptr[3] = current_pixel;
                            dest_ptr[4] = current_pixel;
                            dest_ptr[5] = current_pixel;
                            dest_ptr[6] = current_pixel;
                            dest_ptr[7] = current_pixel;
                            ;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            ;
                        } else {
                            current_pixel = palette[0];
                            dest_ptr[0] = current_pixel;
                            dest_ptr[1] = current_pixel;
                            dest_ptr[2] = current_pixel;
                            dest_ptr[3] = current_pixel;
                            dest_ptr[4] = current_pixel;
                            dest_ptr[5] = current_pixel;
                            dest_ptr[6] = current_pixel;
                            dest_ptr[7] = current_pixel;
                            ;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                            ;
                        } else {
                            current_pixel = palette[0];
                            dest_ptr[0] = current_pixel;
                            dest_ptr[1] = current_pixel;
                            dest_ptr[2] = current_pixel;
                            dest_ptr[3] = current_pixel;
                            dest_ptr[4] = current_pixel;
                            dest_ptr[5] = current_pixel;
                            dest_ptr[6] = current_pixel;
                            dest_ptr[7] = current_pixel;
                            ;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            ;
                        } else {
                            current_pixel = palette[0];
                            dest_ptr[0] = current_pixel;
                            dest_ptr[1] = current_pixel;
                            dest_ptr[2] = current_pixel;
                            dest_ptr[3] = current_pixel;
                            dest_ptr[4] = current_pixel;
                            dest_ptr[5] = current_pixel;
                            dest_ptr[6] = current_pixel;
                            dest_ptr[7] = current_pixel;
                            ;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                            ;
                        } else {
                            current_pixel = palette[0];
                            dest_ptr[0] = current_pixel;
                            dest_ptr[1] = current_pixel;
                            dest_ptr[2] = current_pixel;
                            dest_ptr[3] = current_pixel;
                            dest_ptr[4] = current_pixel;
                            dest_ptr[5] = current_pixel;
                            dest_ptr[6] = current_pixel;
                            dest_ptr[7] = current_pixel;
                            ;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            } else {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_transparent_normal(u32 layer, u32 start, u32 end, void *scanline)
{
    u16 *palette = PLTT;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 3] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 3] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 3] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 2] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 1] = current_pixel;
                                    ;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 0] = current_pixel;
                                    ;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 0] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 1] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 2] = current_pixel;
                                    ;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 3] = current_pixel;
                                    ;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 3] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 2] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 1] = current_pixel;
                                    ;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 0] = current_pixel;
                                    ;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 0] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 1] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 2] = current_pixel;
                                    ;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 3] = current_pixel;
                                    ;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 3] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0 + 3] = current_pixel;
                                ;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 2] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[4 + 3] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 3] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 2] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 1] = current_pixel;
                                    ;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 0] = current_pixel;
                                    ;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 0] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 1] = current_pixel;
                                    ;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 2] = current_pixel;
                                    ;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0 + 3] = current_pixel;
                                    ;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[1] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[2] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[3] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[4] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[5] = current_pixel;
                                ;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[6] = current_pixel;
                                ;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[7] = current_pixel;
                                ;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                current_pixel = palette[current_pixel];
                                dest_ptr[0] = current_pixel;
                                ;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_base_color16(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 bg_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01)
                       | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (5 + 7)) & 0x02))
                      << 9);
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 3] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 2] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 1] = bg_combine;
                                };
                                ;
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 0] = bg_combine;
                                };
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 0] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 1] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 2] = bg_combine;
                                };
                                ;
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 3] = bg_combine;
                                };
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_transparent_color16(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_base_color32(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 bg_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01)
                       | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (5 + 7)) & 0x02))
                      << 9);
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 3] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 2] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 1] = bg_combine;
                                };
                                ;
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 0] = bg_combine;
                                };
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 0] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 1] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 2] = bg_combine;
                                };
                                ;
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 3] = bg_combine;
                                };
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_transparent_color32(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_base_alpha(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 bg_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01)
                       | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (5 + 7)) & 0x02))
                      << 9);
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9)
        | (bg_combine << 16);
    if ((pixel_combine & 0x00000200) == 0) {
        render_scanline_text_base_color32(layer, start, end, scanline);
        return;
    };
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = bg_combine;
                                        };
                                        ;
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 3] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 2] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 1] = bg_combine;
                                };
                                ;
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 0] = bg_combine;
                                };
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = bg_combine;
                                    };
                                    ;
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 0] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 1] = bg_combine;
                                };
                                ;
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 2] = bg_combine;
                                };
                                ;
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0 + 3] = bg_combine;
                                };
                                ;
                                ;
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[0 + 3] = bg_combine;
                        };
                        ;
                        ;
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        current_pixel = current_pixels & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 0] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 8) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 1] = bg_combine;
                        };
                        ;
                        current_pixel = (current_pixels >> 16) & 0xFF;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 2] = bg_combine;
                        };
                        ;
                        current_pixel = current_pixels >> 24;
                        if (current_pixel != 0) {
                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                        } else {
                            dest_ptr[4 + 3] = bg_combine;
                        };
                        ;
                        ;
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 2] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0 + 3] = bg_combine;
                            };
                            ;
                            ;
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                } else {
                                    dest_ptr[0] = bg_combine;
                                };
                                ;
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[1] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[2] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[3] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[4] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[5] = bg_combine;
                            };
                            ;
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[6] = bg_combine;
                            };
                            ;
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[7] = bg_combine;
                            };
                            ;
                            ;
                        } else {
                            dest_ptr[0] = bg_combine;
                            dest_ptr[1] = bg_combine;
                            dest_ptr[2] = bg_combine;
                            dest_ptr[3] = bg_combine;
                            dest_ptr[4] = bg_combine;
                            dest_ptr[5] = bg_combine;
                            dest_ptr[6] = bg_combine;
                            dest_ptr[7] = bg_combine;
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = current_pixel | pixel_combine;
                            } else {
                                dest_ptr[0] = bg_combine;
                            };
                            ;
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};
static void render_scanline_text_transparent_alpha(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    if ((pixel_combine & 0x00000200) == 0) {
        render_scanline_text_transparent_color32(layer, start, end, scanline);
        return;
    };
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 map_width = map_widths[map_size];
    u16 horizontal_offset = ((*(u16 *)((REG_BASE + 0x10) + (layer << 1))) + start) % 512;
    u16 vertical_offset = ((*(u16 *)((REG_BASE + 0x6))) + (*(u16 *)((REG_BASE + 0x12) + (layer << 1)))) % 512;
    u32 current_pixel;
    u32 current_pixels;
    u32 partial_tile_run = 0;
    u32 partial_tile_offset;
    u32 tile_run;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    u16 *map_base = (u16 *)(VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2)));
    u16 *map_ptr, *second_ptr;
    u8 *tile_ptr;
    end -= start;
    if (((map_size & 0x02) != 0) && (vertical_offset >= 256)) {
        map_base += ((map_width / 8) * 32) + (((vertical_offset - 256) / 8) * 32);
    } else {
        map_base += ((vertical_offset % 256) / 8) * 32;
    }
    if ((map_size & 0x01) != 0) {
        if (horizontal_offset >= 256) {
            horizontal_offset -= 256;
            map_ptr = map_base + (32 * 32) + (horizontal_offset / 8);
            second_ptr = map_base;
        } else {
            map_ptr = map_base + (horizontal_offset / 8);
            second_ptr = map_base + (32 * 32);
        }
    } else {
        horizontal_offset %= 256;
        map_ptr = map_base + (horizontal_offset / 8);
        second_ptr = map_base;
    }
    if ((bg_control & 0x80) != 0) {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 8;
            u32 vertical_pixel_flip = ((64 - 8) - vertical_pixel_offset) - vertical_pixel_offset;
            ;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                    u32 old_run = partial_tile_run;
                                    partial_tile_run = 4 - partial_tile_offset;
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    partial_tile_run = old_run - partial_tile_run;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                } else {
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                }
                            };
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixels <<= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        } else {
                            if (partial_tile_offset >= 4) {
                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                            } else {
                                partial_tile_run -= 4;
                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                for (i = 0; i < partial_tile_run; i++) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixels >>= 8;
                                    dest_ptr += 1;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                dest_ptr += 4;
                            };
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = (dest_ptr[4 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = (dest_ptr[4 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = (dest_ptr[4 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = (dest_ptr[4 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = (dest_ptr[4 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = (dest_ptr[4 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = (dest_ptr[4 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = (dest_ptr[4 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels <<= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    } else {
                        if (partial_tile_offset >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                        } else {
                            partial_tile_run -= 4;
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels >>= 8;
                                dest_ptr += 1;
                            };
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                        };
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = (dest_ptr[4 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = (dest_ptr[4 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = (dest_ptr[4 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = (dest_ptr[4 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = (dest_ptr[4 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = (dest_ptr[4 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = (dest_ptr[4 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = (dest_ptr[4 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = (dest_ptr[4 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = (dest_ptr[4 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = (dest_ptr[4 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = (dest_ptr[4 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 0] = (dest_ptr[4 + 0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 1] = (dest_ptr[4 + 1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 2] = (dest_ptr[4 + 2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[4 + 3] = (dest_ptr[4 + 3] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 64);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)(tile_ptr + 4));
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr -= 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr + 4));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 24;
                            if (current_pixel != 0) {
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels <<= 8;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        if (partial_tile_run >= 4) {
                            current_pixels = *((u32 *)tile_ptr);
                            if (current_pixels != 0) {
                                current_pixel = current_pixels & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 0] = (dest_ptr[0 + 0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 8) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 1] = (dest_ptr[0 + 1] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = (current_pixels >> 16) & 0xFF;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 2] = (dest_ptr[0 + 2] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixel = current_pixels >> 24;
                                if (current_pixel != 0) {
                                    dest_ptr[0 + 3] = (dest_ptr[0 + 3] << 16) | current_pixel | pixel_combine;
                                };
                                ;
                            };
                            dest_ptr += 4;
                            tile_ptr += 4;
                            partial_tile_run -= 4;
                        }
                        current_pixels = *((u32 *)(tile_ptr));
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0xFF;
                            if (current_pixel != 0) {
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels >>= 8;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    } else {
        {
            u32 vertical_pixel_offset = (vertical_offset % 8) * 4;
            u32 vertical_pixel_flip = ((32 - 4) - vertical_pixel_offset) - vertical_pixel_offset;
            u32 current_palette;
            u8 *tile_base = VRAM + ((((bg_control >> 2) & 0x03) * (1024 * 16)) + vertical_pixel_offset);
            u32 pixel_run = 256 - (horizontal_offset % 256);
            u32 current_tile;
            map_base += ((vertical_offset % 256) / 8) * 32;
            partial_tile_offset = (horizontal_offset % 8);
            if (pixel_run >= end) {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    if (end < partial_tile_run) {
                        partial_tile_run = end;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        return;
                    } else {
                        end -= partial_tile_run;
                        current_tile = *map_ptr;
                        current_palette = (current_tile >> 12) << 4;
                        tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                        ;
                        if ((current_tile & 0x800) != 0) {
                            tile_ptr += vertical_pixel_flip;
                        }
                        if ((current_tile & 0x400) != 0) {
                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels >> 28;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels <<= 4;
                                dest_ptr += 1;
                            };
                            ;
                        } else {
                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                            for (i = 0; i < partial_tile_run; i++) {
                                current_pixel = current_pixels & 0x0F;
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                                };
                                current_pixels >>= 4;
                                dest_ptr += 1;
                            };
                            ;
                        };
                        map_ptr++;
                        ;
                    }
                }
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = (dest_ptr[7] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = (dest_ptr[6] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = (dest_ptr[5] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = (dest_ptr[4] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = (dest_ptr[3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = (dest_ptr[2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = (dest_ptr[1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = (dest_ptr[1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = (dest_ptr[2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = (dest_ptr[3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = (dest_ptr[4] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = (dest_ptr[5] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = (dest_ptr[6] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = (dest_ptr[7] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            } else {
                if (partial_tile_offset != 0) {
                    partial_tile_run = 8 - partial_tile_offset;
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                    map_ptr++;
                    ;
                }
                tile_run = (pixel_run - partial_tile_run) / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = (dest_ptr[7] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = (dest_ptr[6] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = (dest_ptr[5] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = (dest_ptr[4] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = (dest_ptr[3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = (dest_ptr[2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = (dest_ptr[1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = (dest_ptr[1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = (dest_ptr[2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = (dest_ptr[3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = (dest_ptr[4] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = (dest_ptr[5] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = (dest_ptr[6] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = (dest_ptr[7] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                map_ptr = second_ptr;
                end -= pixel_run;
                tile_run = end / 8;
                for (i = 0; i < tile_run; i++) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = (dest_ptr[7] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = (dest_ptr[6] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = (dest_ptr[5] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = (dest_ptr[4] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = (dest_ptr[3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = (dest_ptr[2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = (dest_ptr[1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        if (current_pixels != 0) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 4) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[1] = (dest_ptr[1] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 8) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[2] = (dest_ptr[2] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 12) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[3] = (dest_ptr[3] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 16) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[4] = (dest_ptr[4] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 20) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[5] = (dest_ptr[5] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = (current_pixels >> 24) & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[6] = (dest_ptr[6] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[7] = (dest_ptr[7] << 16) | current_pixel | pixel_combine;
                            };
                            ;
                        };
                        ;
                    };
                    dest_ptr += 8;
                    map_ptr++;
                };
                partial_tile_run = end % 8;
                if (partial_tile_run != 0) {
                    current_tile = *map_ptr;
                    current_palette = (current_tile >> 12) << 4;
                    tile_ptr = tile_base + ((current_tile & 0x3FF) * 32);
                    ;
                    if ((current_tile & 0x800) != 0) {
                        tile_ptr += vertical_pixel_flip;
                    }
                    if ((current_tile & 0x400) != 0) {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels >> 28;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels <<= 4;
                            dest_ptr += 1;
                        };
                    } else {
                        current_pixels = *((u32 *)tile_ptr);
                        for (i = 0; i < partial_tile_run; i++) {
                            current_pixel = current_pixels & 0x0F;
                            if (current_pixel != 0) {
                                current_pixel |= current_palette;
                                dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                            };
                            current_pixels >>= 4;
                            dest_ptr += 1;
                        };
                        ;
                    };
                }
            }
        };
    }
};

static void render_scanline_affine_base_normal(u32 layer, u32 start, u32 end, void *scanline)
{
    u16 *palette = PLTT;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            current_pixel = PLTT[0];
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    dest_ptr[0] = current_pixel;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    current_pixel = palette[current_pixel];
                    dest_ptr[0] = current_pixel;
                    ;
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
            current_pixel = PLTT[0];
            for (; i < end; i++) {
                dest_ptr[0] = current_pixel;
                dest_ptr += 1;
            };
        }; break;
        case 0x01: {
            current_pixel = PLTT[0];
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                }
                dest_ptr[0] = current_pixel;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    current_pixel = PLTT[0];
                    for (; i < end; i++) {
                        dest_ptr[0] = current_pixel;
                        dest_ptr += 1;
                    };
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                current_pixel = palette[current_pixel];
                dest_ptr[0] = current_pixel;
                ;
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    current_pixel = palette[current_pixel];
                    dest_ptr[0] = current_pixel;
                    ;
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                current_pixel = palette[current_pixel];
                dest_ptr[0] = current_pixel;
                ;
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_transparent_normal(u32 layer, u32 start, u32 end, void *scanline)
{
    u16 *palette = PLTT;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            ;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        current_pixel = palette[current_pixel];
                        dest_ptr[0] = current_pixel;
                        ;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            };
        }; break;
        case 0x01: {
            ;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    ;
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    current_pixel = palette[current_pixel];
                    dest_ptr[0] = current_pixel;
                    ;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        current_pixel = palette[current_pixel];
                        dest_ptr[0] = current_pixel;
                        ;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    current_pixel = palette[current_pixel];
                    dest_ptr[0] = current_pixel;
                    ;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_base_color16(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 bg_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01)
                       | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (5 + 7)) & 0x02))
                      << 9);
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            current_pixel = bg_combine;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    dest_ptr[0] = current_pixel;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    } else {
                        dest_ptr[0] = bg_combine;
                    };
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
            current_pixel = bg_combine;
            for (; i < end; i++) {
                dest_ptr[0] = current_pixel;
                dest_ptr += 1;
            };
        }; break;
        case 0x01: {
            current_pixel = bg_combine;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                }
                dest_ptr[0] = current_pixel;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    current_pixel = bg_combine;
                    for (; i < end; i++) {
                        dest_ptr[0] = current_pixel;
                        dest_ptr += 1;
                    };
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                } else {
                    dest_ptr[0] = bg_combine;
                };
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    } else {
                        dest_ptr[0] = bg_combine;
                    };
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                } else {
                    dest_ptr[0] = bg_combine;
                };
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_transparent_color16(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            ;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            };
        }; break;
        case 0x01: {
            ;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    ;
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_base_color32(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 bg_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01)
                       | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (5 + 7)) & 0x02))
                      << 9);
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            current_pixel = bg_combine;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    dest_ptr[0] = current_pixel;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    } else {
                        dest_ptr[0] = bg_combine;
                    };
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
            current_pixel = bg_combine;
            for (; i < end; i++) {
                dest_ptr[0] = current_pixel;
                dest_ptr += 1;
            };
        }; break;
        case 0x01: {
            current_pixel = bg_combine;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                }
                dest_ptr[0] = current_pixel;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    current_pixel = bg_combine;
                    for (; i < end; i++) {
                        dest_ptr[0] = current_pixel;
                        dest_ptr += 1;
                    };
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                } else {
                    dest_ptr[0] = bg_combine;
                };
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    } else {
                        dest_ptr[0] = bg_combine;
                    };
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                } else {
                    dest_ptr[0] = bg_combine;
                };
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_transparent_color32(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            ;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            };
        }; break;
        case 0x01: {
            ;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    ;
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_base_alpha(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 bg_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01)
                       | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (5 + 7)) & 0x02))
                      << 9);
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9)
        | (bg_combine << 16);
    if ((pixel_combine & 0x00000200) == 0) {
        render_scanline_affine_base_color32(layer, start, end, scanline);
        return;
    };
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            current_pixel = bg_combine;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    dest_ptr[0] = current_pixel;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    } else {
                        dest_ptr[0] = bg_combine;
                    };
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
            current_pixel = bg_combine;
            for (; i < end; i++) {
                dest_ptr[0] = current_pixel;
                dest_ptr += 1;
            };
        }; break;
        case 0x01: {
            current_pixel = bg_combine;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                }
                dest_ptr[0] = current_pixel;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    current_pixel = bg_combine;
                    for (; i < end; i++) {
                        dest_ptr[0] = current_pixel;
                        dest_ptr += 1;
                    };
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                } else {
                    dest_ptr[0] = bg_combine;
                };
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = current_pixel | pixel_combine;
                    } else {
                        dest_ptr[0] = bg_combine;
                    };
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = current_pixel | pixel_combine;
                } else {
                    dest_ptr[0] = bg_combine;
                };
                ;
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};
static void render_scanline_affine_transparent_alpha(u32 layer, u32 start, u32 end, void *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> layer) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (layer + 7)) & 0x02))
                         << 9);
    if ((pixel_combine & 0x00000200) == 0) {
        render_scanline_affine_transparent_color32(layer, start, end, scanline);
        return;
    };
    ;
    u16 bg_control = (*(u16 *)((REG_BASE + 0x8) + layer));
    u32 current_pixel;
    s32 source_x, source_y;
    u32 pixel_x, pixel_y;
    u32 layer_offset = (layer == 3) ? 1 : 0;
    s32 dx, dy;
    u32 map_size = (bg_control >> 14) & 0x03;
    u32 width_height = 1 << (7 + map_size);
    u32 map_pitch = map_size + 4;
    u8 *map_base = VRAM + (((bg_control >> 8) & 0x1F) * (1024 * 2));
    u8 *tile_base = VRAM + (((bg_control >> 2) & 0x03) * (1024 * 16));
    u8 *tile_ptr = ((void *)0);
    u32 map_offset, last_map_offset = (u32)-1;
    u32 i;
    u32 *dest_ptr = ((u32 *)scanline) + start;
    dx = *((s16 *)((REG_BASE + 0x20) + (layer_offset << 3)));
    dy = *((s16 *)((REG_BASE + 0x24) + (layer_offset << 3)));
    source_x = affine_reference_x[layer_offset] + (start * dx);
    source_y = affine_reference_y[layer_offset] + (start * dy);
    end -= start;
    switch (((bg_control >> 12) & 0x02) | (dy != 0)) {
        case 0x00: {
            pixel_y = source_y >> 8;
            u32 i = 0;
            ;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x < (u32)width_height)
                        break;
                    ;
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                }
                for (; i < end; i++) {
                    pixel_x = source_x >> 8;
                    if ((u32)pixel_x >= (u32)width_height)
                        break;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            };
        }; break;
        case 0x01: {
            ;
            for (i = 0; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x < (u32)width_height) && ((u32)pixel_y < (u32)width_height)) {
                    break;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
            }
            for (; i < end; i++) {
                pixel_x = source_x >> 8;
                pixel_y = source_y >> 8;
                if (((u32)pixel_x >= (u32)width_height) || ((u32)pixel_y >= (u32)width_height)) {
                    ;
                    break;
                }
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
        case 0x02: {
            u32 wrap_mask = width_height - 1;
            pixel_y = (source_y >> 8) & wrap_mask;
            if ((u32)pixel_y < (u32)width_height) {
                tile_base += (pixel_y % 8) * 8;
                map_base += (pixel_y / 8) << map_pitch;
                ;
                for (i = 0; i < end; i++) {
                    pixel_x = (source_x >> 8) & wrap_mask;
                    map_offset = (pixel_x / 8);
                    if (map_offset != last_map_offset) {
                        tile_ptr = tile_base + (map_base[map_offset] * 64);
                        last_map_offset = map_offset;
                    }
                    tile_ptr = tile_base + (map_base[(pixel_x / 8)] * 64);
                    current_pixel = tile_ptr[(pixel_x % 8)];
                    ;
                    if (current_pixel != 0) {
                        dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                    };
                    source_x += dx;
                    source_y += dy;
                    dest_ptr += 1;
                    ;
                    ;
                }
            }
        }; break;
        case 0x03: {
            u32 wrap_mask = width_height - 1;
            for (i = 0; i < end; i++) {
                pixel_x = (source_x >> 8) & wrap_mask;
                pixel_y = (source_y >> 8) & wrap_mask;
                map_offset = (pixel_x / 8) + ((pixel_y / 8) << map_pitch);
                if (map_offset != last_map_offset) {
                    tile_ptr = tile_base + (map_base[map_offset] * 64);
                    last_map_offset = map_offset;
                }
                current_pixel = tile_ptr[(pixel_x % 8) + ((pixel_y % 8) * 8)];
                ;
                if (current_pixel != 0) {
                    dest_ptr[0] = (dest_ptr[0] << 16) | current_pixel | pixel_combine;
                };
                source_x += dx;
                source_y += dy;
                dest_ptr += 1;
                ;
                ;
            }
        }; break;
    }
};

static void render_scanline_bitmap_mode3_normal(u32 start, u32 end, void *scanline)
{
    u32 current_pixel;
    s32 source_x, source_y;
    s32 pixel_x, pixel_y;
    s32 dx = *((s16 *)(REG_BASE + 0x20));
    s32 dy = *((s16 *)(REG_BASE + 0x24));
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *src_ptr = (u16 *)VRAM;
    end -= start;
    source_x = affine_reference_x[0] + (start * dx);
    source_y = affine_reference_y[0] + (start * dy);
    if (dy == 0) {
        pixel_y = (source_y >> 8);
        if ((u32)pixel_y < (u32)160) {
            pixel_x = (source_x >> 8);
            src_ptr += pixel_y * 240;
            if (dx == 0x100) {
                if (pixel_x < 0) {
                    end += pixel_x;
                    dest_ptr -= pixel_x;
                    pixel_x = 0;
                } else if (pixel_x > 0) {
                    src_ptr += pixel_x;
                }
                if ((pixel_x + end) >= 240) {
                    end = (240 - pixel_x);
                }
                for (i = 0; (s32)i < (s32)end; i++) {
                    current_pixel = *src_ptr;
                    *dest_ptr = current_pixel;
                    src_ptr++;
                    dest_ptr++;
                }
            } else {
                if ((u32)(source_y >> 8) < (u32)160) {
                    for (i = 0; i < end; i++) {
                        pixel_x = (source_x >> 8);
                        if ((u32)pixel_x < (u32)240)
                            break;
                        source_x += dx;
                        dest_ptr++;
                    }
                    for (; i < end; i++) {
                        pixel_x = (source_x >> 8);
                        if ((u32)pixel_x >= (u32)240)
                            break;
                        current_pixel = src_ptr[pixel_x];
                        *dest_ptr = current_pixel;
                        source_x += dx;
                        dest_ptr++;
                    }
                }
            }
        };
    } else {
        for (i = 0; i < end; i++) {
            pixel_x = source_x >> 8;
            pixel_y = source_y >> 8;
            if (((u32)pixel_x < (u32)240) && ((u32)pixel_y < (u32)160))
                break;
            source_x += dx;
            source_y += dy;
            dest_ptr++;
        }
        for (; i < end; i++) {
            pixel_x = (source_x >> 8);
            pixel_y = (source_y >> 8);
            if (((u32)pixel_x >= (u32)240) || ((u32)pixel_y >= (u32)160))
                break;
            current_pixel = src_ptr[pixel_x + (pixel_y * 240)];
            *dest_ptr = current_pixel;
            source_x += dx;
            source_y += dy;
            dest_ptr++;
        };
    }
};
static void render_scanline_bitmap_mode4_normal(u32 start, u32 end, void *scanline)
{
    u32 current_pixel;
    s32 source_x, source_y;
    s32 pixel_x, pixel_y;
    s32 dx = *((s16 *)(REG_BASE + 0x20));
    s32 dy = *((s16 *)(REG_BASE + 0x24));
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *palette = PLTT;
    u8 *src_ptr;
    if (((*(u16 *)((REG_BASE + 0x0))) & 0x10) != 0) {
        src_ptr = VRAM + 0xA000;
    } else {
        src_ptr = VRAM;
    };
    end -= start;
    source_x = affine_reference_x[0] + (start * dx);
    source_y = affine_reference_y[0] + (start * dy);
    if (dy == 0) {
        pixel_y = (source_y >> 8);
        if ((u32)pixel_y < (u32)160) {
            pixel_x = (source_x >> 8);
            src_ptr += pixel_y * 240;
            if (dx == 0x100) {
                if (pixel_x < 0) {
                    end += pixel_x;
                    dest_ptr -= pixel_x;
                    pixel_x = 0;
                } else if (pixel_x > 0) {
                    src_ptr += pixel_x;
                }
                if ((pixel_x + end) >= 240) {
                    end = (240 - pixel_x);
                }
                for (i = 0; (s32)i < (s32)end; i++) {
                    current_pixel = *src_ptr;
                    if (current_pixel != 0) {
                        current_pixel = palette[current_pixel];
                        dest_ptr[0] = current_pixel;
                    };
                    src_ptr++;
                    dest_ptr++;
                }
            } else {
                if ((u32)(source_y >> 8) < (u32)160) {
                    for (i = 0; i < end; i++) {
                        pixel_x = (source_x >> 8);
                        if ((u32)pixel_x < (u32)240)
                            break;
                        source_x += dx;
                        dest_ptr++;
                    }
                    for (; i < end; i++) {
                        pixel_x = (source_x >> 8);
                        if ((u32)pixel_x >= (u32)240)
                            break;
                        current_pixel = src_ptr[pixel_x];
                        if (current_pixel != 0) {
                            current_pixel = palette[current_pixel];
                            dest_ptr[0] = current_pixel;
                        };
                        source_x += dx;
                        dest_ptr++;
                    }
                }
            }
        };
    } else {
        for (i = 0; i < end; i++) {
            pixel_x = source_x >> 8;
            pixel_y = source_y >> 8;
            if (((u32)pixel_x < (u32)240) && ((u32)pixel_y < (u32)160))
                break;
            source_x += dx;
            source_y += dy;
            dest_ptr++;
        }
        for (; i < end; i++) {
            pixel_x = (source_x >> 8);
            pixel_y = (source_y >> 8);
            if (((u32)pixel_x >= (u32)240) || ((u32)pixel_y >= (u32)160))
                break;
            current_pixel = src_ptr[pixel_x + (pixel_y * 240)];
            if (current_pixel != 0) {
                current_pixel = palette[current_pixel];
                dest_ptr[0] = current_pixel;
            };
            source_x += dx;
            source_y += dy;
            dest_ptr++;
        };
    }
};
static void render_scanline_bitmap_mode5_normal(u32 start, u32 end, void *scanline)
{
    u32 current_pixel;
    s32 source_x, source_y;
    s32 pixel_x, pixel_y;
    s32 dx = *((s16 *)(REG_BASE + 0x20));
    s32 dy = *((s16 *)(REG_BASE + 0x24));
    u32 i;
    u16 *dest_ptr = ((u16 *)scanline) + start;
    u16 *src_ptr;
    if (((*(u16 *)((REG_BASE + 0x0))) & 0x10) != 0) {
        src_ptr = (u16 *)(VRAM + 0xA000);
    } else {
        src_ptr = (u16 *)VRAM;
    };
    end -= start;
    source_x = affine_reference_x[0] + (start * dx);
    source_y = affine_reference_y[0] + (start * dy);
    if (dy == 0) {
        pixel_y = (source_y >> 8);
        if ((u32)pixel_y < (u32)128) {
            pixel_x = (source_x >> 8);
            src_ptr += pixel_y * 160;
            if (dx == 0x100) {
                if (pixel_x < 0) {
                    end += pixel_x;
                    dest_ptr -= pixel_x;
                    pixel_x = 0;
                } else if (pixel_x > 0) {
                    src_ptr += pixel_x;
                }
                if ((pixel_x + end) >= 160) {
                    end = (160 - pixel_x);
                }
                for (i = 0; (s32)i < (s32)end; i++) {
                    current_pixel = *src_ptr;
                    *dest_ptr = current_pixel;
                    src_ptr++;
                    dest_ptr++;
                }
            } else {
                if ((u32)(source_y >> 8) < (u32)128) {
                    for (i = 0; i < end; i++) {
                        pixel_x = (source_x >> 8);
                        if ((u32)pixel_x < (u32)160)
                            break;
                        source_x += dx;
                        dest_ptr++;
                    }
                    for (; i < end; i++) {
                        pixel_x = (source_x >> 8);
                        if ((u32)pixel_x >= (u32)160)
                            break;
                        current_pixel = src_ptr[pixel_x];
                        *dest_ptr = current_pixel;
                        source_x += dx;
                        dest_ptr++;
                    }
                }
            }
        };
    } else {
        for (i = 0; i < end; i++) {
            pixel_x = source_x >> 8;
            pixel_y = source_y >> 8;
            if (((u32)pixel_x < (u32)160) && ((u32)pixel_y < (u32)128))
                break;
            source_x += dx;
            source_y += dy;
            dest_ptr++;
        }
        for (; i < end; i++) {
            pixel_x = (source_x >> 8);
            pixel_y = (source_y >> 8);
            if (((u32)pixel_x >= (u32)160) || ((u32)pixel_y >= (u32)128))
                break;
            current_pixel = src_ptr[pixel_x + (pixel_y * 160)];
            *dest_ptr = current_pixel;
            source_x += dx;
            source_y += dy;
            dest_ptr++;
        };
    }
};

TileLayerRenderStruct tile_mode_renderers[3][4]
    = { { { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 } },
        { { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_affine_base_normal, render_scanline_affine_transparent_normal, render_scanline_affine_base_alpha,
            render_scanline_affine_transparent_alpha, render_scanline_affine_base_color16, render_scanline_affine_transparent_color16,
            render_scanline_affine_base_color32, render_scanline_affine_transparent_color32 },
          { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 } },
        { { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_text_base_normal, render_scanline_text_transparent_normal, render_scanline_text_base_alpha,
            render_scanline_text_transparent_alpha, render_scanline_text_base_color16, render_scanline_text_transparent_color16,
            render_scanline_text_base_color32, render_scanline_text_transparent_color32 },
          { render_scanline_affine_base_normal, render_scanline_affine_transparent_normal, render_scanline_affine_base_alpha,
            render_scanline_affine_transparent_alpha, render_scanline_affine_base_color16, render_scanline_affine_transparent_color16,
            render_scanline_affine_base_color32, render_scanline_affine_transparent_color32 },
          { render_scanline_affine_base_normal, render_scanline_affine_transparent_normal, render_scanline_affine_base_alpha,
            render_scanline_affine_transparent_alpha, render_scanline_affine_base_color16, render_scanline_affine_transparent_color16,
            render_scanline_affine_base_color32, render_scanline_affine_transparent_color32 } } };

BitmapLayerRenderStruct bitmap_mode_renderers[3]
    = { { render_scanline_bitmap_mode3_normal }, { render_scanline_bitmap_mode4_normal }, { render_scanline_bitmap_mode5_normal } };

static void render_scanline_obj_normal_1D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u16 *palette = PLTT + 256;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                        + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 64;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                        + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 32;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[5] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[6] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[7] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[7] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[6] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[5] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        current_pixel = palette[current_pixel];
                                                        dest_ptr[0] = current_pixel;
                                                        ;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 0] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 1] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 2] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 3] = current_pixel;
                                                    ;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 3] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 3] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        current_pixel = palette[current_pixel];
                                                        dest_ptr[0] = current_pixel;
                                                        ;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 3] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 2] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 1] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 0] = current_pixel;
                                                    ;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_normal_2D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u16 *palette = PLTT + 256;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    current_pixel = palette[current_pixel];
                                    dest_ptr[0] = current_pixel;
                                    ;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[5] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[6] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[7] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                        + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[7] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[6] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[5] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[7] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[6] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[5] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        current_pixel = palette[current_pixel];
                                                        dest_ptr[0] = current_pixel;
                                                        ;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 0] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 1] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 2] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 3] = current_pixel;
                                                    ;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 3] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 0] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 3] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                        + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        current_pixel = palette[current_pixel];
                                                        dest_ptr[0] = current_pixel;
                                                        ;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            current_pixel = palette[current_pixel];
                                                            dest_ptr[0] = current_pixel;
                                                            ;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0] = current_pixel;
                                                    ;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 3] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 2] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 1] = current_pixel;
                                                    ;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    current_pixel = palette[current_pixel];
                                                    dest_ptr[0 + 0] = current_pixel;
                                                    ;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0] = current_pixel;
                                                ;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 3] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 2] = current_pixel;
                                            ;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 1] = current_pixel;
                                            ;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[4 + 0] = current_pixel;
                                            ;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 3] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 2] = current_pixel;
                                                ;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 1] = current_pixel;
                                                ;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                current_pixel = palette[current_pixel];
                                                dest_ptr[0 + 0] = current_pixel;
                                                ;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            current_pixel = palette[current_pixel];
                                            dest_ptr[0] = current_pixel;
                                            ;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[0 + 0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 3] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 2] = current_pixel;
                                        ;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 1] = current_pixel;
                                        ;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        current_pixel = palette[current_pixel];
                                        dest_ptr[4 + 0] = current_pixel;
                                        ;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_color16_1D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                        + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 64;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                        + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 32;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_color16_2D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                        + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                        + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_color32_1D(u32 priority, u32 start, u32 end, u32 *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u32 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                        + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 64;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                        + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 32;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_color32_2D(u32 priority, u32 start, u32 end, u32 *scanline)
{
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u32 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = current_pixel | pixel_combine;
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                        + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                        + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_alpha_obj_1D(u32 priority, u32 start, u32 end, u32 *scanline)
{
    u32 dest;
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;

    if ((pixel_combine & 0x00000200) == 0) {
        render_scanline_obj_color32_1D(priority, start, end, scanline);
        return;
    };
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u32 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                        + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 64;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest = dest_ptr[0];
                                    if ((dest & 0x00000100) != 0) {
                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                    };
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                        + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 32;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest = dest_ptr[0];
                                    if ((dest & 0x00000100) != 0) {
                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                    };
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[4];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[5];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[6];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[7];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[7];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[6];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[5];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[4];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_alpha_obj_2D(u32 priority, u32 start, u32 end, u32 *scanline)
{
    u32 dest;
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    if ((pixel_combine & 0x00000200) == 0) {
        render_scanline_obj_color32_2D(priority, start, end, scanline);
        return;
    };
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u32 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest = dest_ptr[0];
                                    if ((dest & 0x00000100) != 0) {
                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                    };
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest = dest_ptr[0];
                                    if ((dest & 0x00000100) != 0) {
                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                    } else {
                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                    };
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[4];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[5];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[6];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[7];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                        + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[7];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[6];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[5];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[4];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                        + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 3];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 2];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 1];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[4 + 0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_partial_alpha_1D(u32 priority, u32 start, u32 end, u32 *scanline)
{
    u32 dest;
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    u32 base_pixel_combine = pixel_combine;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u32 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if (((obj_attribute_0 >> 10) & 0x03) != 0) {
            pixel_combine = 0x00000300;
            if ((obj_attribute_0 & 0x100) != 0) {
                if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 8;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        ;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                            + ((vertical_offset % 8) * 8))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 64;
                                        current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                        ;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                                obj_tile_pitch = (max_x / 8) * 64;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                } else {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 4;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                            + ((vertical_offset % 8) * 4))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 32;
                                        if ((tile_x & 0x01) != 0) {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                        } else {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                        };
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                                obj_tile_pitch = (max_x / 8) * 32;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                    } else {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                }
            } else {
                vertical_offset = vcount - obj_y;
                if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                    vertical_offset = obj_height - vertical_offset - 1;
                }
                switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                    case 0x0: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                            + ((vertical_offset % 8) * 4) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0x0F;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset += 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x1: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                            + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 28;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset -= 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x2: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                            + ((vertical_offset % 8) * 8) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)(tile_ptr + 4));
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 1];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 2];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 3];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset += 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x3: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                            + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)tile_ptr);
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 3];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 2];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 1];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset -= 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                }
            };
        } else {
            pixel_combine = base_pixel_combine;
            if ((obj_attribute_0 & 0x100) != 0) {
                if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 8;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        ;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                            + ((vertical_offset % 8) * 8))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 64;
                                        current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                        ;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                                obj_tile_pitch = (max_x / 8) * 64;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                } else {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 4;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                            + ((vertical_offset % 8) * 4))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 32;
                                        if ((tile_x & 0x01) != 0) {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                        } else {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                        };
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                                obj_tile_pitch = (max_x / 8) * 32;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                    } else {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                }
            } else {
                vertical_offset = vcount - obj_y;
                if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                    vertical_offset = obj_height - vertical_offset - 1;
                }
                switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                    case 0x0: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                            + ((vertical_offset % 8) * 4) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0x0F;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset += 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x1: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                            + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 28;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset -= 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x2: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                            + ((vertical_offset % 8) * 8) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)(tile_ptr + 4));
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset += 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x3: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                            + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)tile_ptr);
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset -= 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                }
            };
        };
    }
};
static void render_scanline_obj_partial_alpha_2D(u32 priority, u32 start, u32 end, u32 *scanline)
{
    u32 dest;
    u32 pixel_combine = (((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 4) & 0x01)
                          | (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> (4 + 7)) & 0x02))
                         << 9)
        | (1 << 8);
    ;
    u32 base_pixel_combine = pixel_combine;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u32 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        ;
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if (((obj_attribute_0 >> 10) & 0x03) != 0) {
            pixel_combine = 0x00000300;
            if ((obj_attribute_0 & 0x100) != 0) {
                if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 8;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        ;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 64;
                                        current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                        ;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                                obj_tile_pitch = 1024;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                } else {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 4;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 32;
                                        if ((tile_x & 0x01) != 0) {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                        } else {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                        };
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                                obj_tile_pitch = 1024;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                    } else {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest = dest_ptr[0];
                                        if ((dest & 0x00000100) != 0) {
                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                        } else {
                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                        };
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                }
            } else {
                vertical_offset = vcount - obj_y;
                if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                    vertical_offset = obj_height - vertical_offset - 1;
                }
                switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                    case 0x0: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset
                            = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0x0F;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset += 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x1: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                            + (32 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 28;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset -= 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[7];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[6];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[5];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[4];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[7];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[7] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[7] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[6];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[6] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[6] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[5];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[5] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[5] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[4];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest = dest_ptr[0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x2: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset
                            = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)(tile_ptr + 4));
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 1];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 2];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 3];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset += 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x3: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                            + (64 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest = dest_ptr[0];
                                                            if ((dest & 0x00000100) != 0) {
                                                                dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                            } else {
                                                                dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                            };
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest = dest_ptr[0];
                                                                if ((dest & 0x00000100) != 0) {
                                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                                } else {
                                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                                };
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)tile_ptr);
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 3];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 2];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 1];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest = dest_ptr[0 + 0];
                                                        if ((dest & 0x00000100) != 0) {
                                                            dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                        } else {
                                                            dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                        };
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset -= 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 3];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 2];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 1];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[4 + 0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 3];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 2];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 1];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest = dest_ptr[0 + 0];
                                                    if ((dest & 0x00000100) != 0) {
                                                        dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                    } else {
                                                        dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                                    };
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest = dest_ptr[0];
                                                if ((dest & 0x00000100) != 0) {
                                                    dest_ptr[0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                                } else {
                                                    dest_ptr[0] = (dest << 16) | current_pixel | pixel_combine;
                                                };
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[0 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[0 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[0 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 3];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 3] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 3] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 2];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 2] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 2] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 1];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 1] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 1] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest = dest_ptr[4 + 0];
                                            if ((dest & 0x00000100) != 0) {
                                                dest_ptr[4 + 0] = (dest & 0xFFFF0000) | current_pixel | pixel_combine;
                                            } else {
                                                dest_ptr[4 + 0] = (dest << 16) | current_pixel | pixel_combine;
                                            };
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                }
            };
        } else {
            pixel_combine = base_pixel_combine;
            if ((obj_attribute_0 & 0x100) != 0) {
                if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 8;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        ;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 64;
                                        current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                        ;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                                obj_tile_pitch = 1024;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                } else {
                    {
                        s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                        s32 dx = params[3];
                        s32 dmx = params[7];
                        s32 dy = params[11];
                        s32 dmy = params[15];
                        s32 source_x, source_y;
                        s32 tile_x, tile_y;
                        u32 tile_map_offset;
                        s32 middle_x;
                        s32 middle_y;
                        s32 max_x = obj_width;
                        s32 max_y = obj_height;
                        s32 y_delta;
                        u32 obj_pitch = 4;
                        u32 obj_tile_pitch;
                        middle_x = (obj_width >> 1);
                        middle_y = (obj_height >> 1);
                        source_x = (middle_x << 8);
                        source_y = (middle_y << 8);
                        if ((obj_attribute_0 & 0x200) != 0) {
                            obj_width <<= 1;
                            obj_height <<= 1;
                            middle_x <<= 1;
                            middle_y <<= 1;
                        }
                        if ((s32)obj_x < (s32)start) {
                            u32 x_delta = start - obj_x;
                            middle_x -= x_delta;
                            obj_width -= x_delta;
                            obj_x = start;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        if ((s32)(obj_x + obj_width) >= (s32)end) {
                            obj_width = end - obj_x;
                            if ((s32)obj_width <= 0)
                                continue;
                        }
                        dest_ptr = scanline + obj_x;
                        y_delta = vcount - (obj_y + middle_y);
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        if (dy == 0) {
                            {
                                u32 vertical_offset;
                                source_y += y_delta * dmy;
                                vertical_offset = (source_y >> 8);
                                if ((u32)vertical_offset < (u32)max_y) {
                                    tile_ptr = obj_tile_base
                                        + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                           & 0x7FFF);
                                    source_x += (y_delta * dmx) - (middle_x * dx);
                                    for (i = 0; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x < (u32)max_x)
                                            break;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                    for (; i < obj_width; i++) {
                                        tile_x = (source_x >> 8);
                                        if ((u32)tile_x >= (u32)max_x)
                                            break;
                                        tile_map_offset = (tile_x >> 3) * 32;
                                        if ((tile_x & 0x01) != 0) {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                        } else {
                                            current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                        };
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                        source_x += dx;
                                        dest_ptr += 1;
                                    }
                                }
                            };
                        } else {
                            {
                                tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                                obj_tile_pitch = 1024;
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                source_y += (y_delta * dmy) - (middle_x * dy);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                        break;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    tile_y = (source_y >> 8);
                                    if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                        break;
                                    tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                    } else {
                                        current_pixel
                                            = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = current_pixel | pixel_combine;
                                    };
                                    ;
                                    source_x += dx;
                                    source_y += dy;
                                    dest_ptr += 1;
                                }
                            };
                        }
                    };
                }
            } else {
                vertical_offset = vcount - obj_y;
                if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                    vertical_offset = obj_height - vertical_offset - 1;
                }
                switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                    case 0x0: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset
                            = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0x0F;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset += 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x1: {
                        u32 obj_tile_offset;
                        current_palette = (obj_attribute_2 >> 8) & 0xF0;
                        obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                            + (32 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 28;
                                                    if (current_pixel != 0) {
                                                        current_pixel |= current_palette;
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 4;
                                                    dest_ptr += 1;
                                                };
                                                ;
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                            };
                                            ;
                                            obj_tile_offset -= 32;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[7] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 4) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[6] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[5] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 12) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[4] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 20) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 24) & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                        };
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x2: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset
                            = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels & 0xFF;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels >>= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)(tile_ptr + 4));
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset += 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset += (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr += 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                    case 0x3: {
                        u32 obj_tile_offset;
                        ;
                        obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                            + (64 * ((obj_width - 8) / 8));
                        if (obj_x < (s32)start) {
                            dest_ptr = scanline + start;
                            pixel_run = obj_width - (start - obj_x);
                            if ((s32)pixel_run > 0) {
                                if ((obj_x + obj_width) >= end) {
                                    pixel_run = end - start;
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        if ((s32)pixel_run < (s32)partial_tile_run) {
                                            if ((s32)pixel_run > 0) {
                                                partial_tile_run = pixel_run;
                                                obj_tile_offset &= 0x7FFF;
                                                tile_ptr = obj_tile_base + obj_tile_offset;
                                                if (partial_tile_offset >= 4) {
                                                    current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = current_pixel | pixel_combine;
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                    };
                                                } else {
                                                    current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                    if ((partial_tile_offset + partial_tile_run) > 4) {
                                                        u32 old_run = partial_tile_run;
                                                        partial_tile_run = 4 - partial_tile_offset;
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                        partial_tile_run = old_run - partial_tile_run;
                                                        current_pixels = *((u32 *)(tile_ptr));
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    } else {
                                                        for (i = 0; i < partial_tile_run; i++) {
                                                            current_pixel = current_pixels >> 24;
                                                            if (current_pixel != 0) {
                                                                dest_ptr[0] = current_pixel | pixel_combine;
                                                            };
                                                            current_pixels <<= 8;
                                                            dest_ptr += 1;
                                                        };
                                                    }
                                                };
                                                ;
                                            }
                                            continue;
                                        } else {
                                            pixel_run -= partial_tile_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                            } else {
                                                partial_tile_run -= 4;
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                };
                                                current_pixels = *((u32 *)tile_ptr);
                                                if (current_pixels != 0) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                    };
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                    };
                                                    ;
                                                };
                                                dest_ptr += 4;
                                            };
                                            obj_tile_offset -= 64;
                                            ;
                                        }
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                } else {
                                    partial_tile_offset = start - obj_x;
                                    obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                    partial_tile_offset %= 8;
                                    if (partial_tile_offset != 0) {
                                        partial_tile_run = 8 - partial_tile_offset;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = current_pixel | pixel_combine;
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                }
                            }
                        } else {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - obj_x;
                                if ((s32)pixel_run > 0) {
                                    dest_ptr = scanline + obj_x;
                                    tile_run = pixel_run / 8;
                                    for (i = 0; i < tile_run; i++) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                            };
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 64;
                                        dest_ptr += 8;
                                    };
                                    partial_tile_run = pixel_run % 8;
                                    if (partial_tile_run != 0) {
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_run >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            tile_ptr -= 4;
                                            partial_tile_run -= 4;
                                        }
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = current_pixel | pixel_combine;
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                        };
                                        ;
                                        ;
                                    }
                                }
                            } else {
                                dest_ptr = scanline + obj_x;
                                tile_run = obj_width / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = current_pixel | pixel_combine;
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = current_pixel | pixel_combine;
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                };
                            }
                        }
                    }; break;
                }
            };
        };
    }
};
static void render_scanline_obj_copy_tile_1D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    u16 dispcnt = (*(u16 *)((REG_BASE + 0x0)));
    u8 obj_enable = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 5)))) >> 8;
    TileLayerRenderStruct *layer_renderers = tile_mode_renderers[dispcnt & 0x07];
    u32 copy_start, copy_end;
    u16 __attribute__((aligned(64))) copy_buffer[240];
    u16 *copy_ptr;
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        copy_start = obj_x;
        if ((obj_attribute_0 & 0x200) != 0)
            copy_end = obj_x + (obj_width << 1);
        else
            copy_end = obj_x + obj_width;
        if (copy_start < start)
            copy_start = start;
        if (copy_end > end)
            copy_end = end;
        if ((copy_start < end) && (copy_end > start)) {
            render_scanline_conditional_tile(copy_start, copy_end, copy_buffer, obj_enable, dispcnt, bldcnt, layer_renderers);
            copy_ptr = copy_buffer + copy_start;
        } else {
            continue;
        };
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                        + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 64;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                        + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 32;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_copy_tile_2D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    u16 dispcnt = (*(u16 *)((REG_BASE + 0x0)));
    u8 obj_enable = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 5)))) >> 8;
    TileLayerRenderStruct *layer_renderers = tile_mode_renderers[dispcnt & 0x07];
    u32 copy_start, copy_end;
    u16 __attribute__((aligned(64))) copy_buffer[240];
    u16 *copy_ptr;
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        copy_start = obj_x;
        if ((obj_attribute_0 & 0x200) != 0)
            copy_end = obj_x + (obj_width << 1);
        else
            copy_end = obj_x + obj_width;
        if (copy_start < start)
            copy_start = start;
        if (copy_end > end)
            copy_end = end;
        if ((copy_start < end) && (copy_end > start)) {
            render_scanline_conditional_tile(copy_start, copy_end, copy_buffer, obj_enable, dispcnt, bldcnt, layer_renderers);
            copy_ptr = copy_buffer + copy_start;
        } else {
            continue;
        };
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                        + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                        + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_copy_bitmap_1D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    u16 dispcnt = (*(u16 *)((REG_BASE + 0x0)));
    u8 obj_enable = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 5)))) >> 8;
    BitmapLayerRenderStruct *layer_renderers = bitmap_mode_renderers + ((dispcnt & 0x07) - 3);
    u32 copy_start, copy_end;
    u16 __attribute__((aligned(64))) copy_buffer[240];
    u16 *copy_ptr;
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        copy_start = obj_x;
        if ((obj_attribute_0 & 0x200) != 0)
            copy_end = obj_x + (obj_width << 1);
        else
            copy_end = obj_x + obj_width;
        if (copy_start < start)
            copy_start = start;
        if (copy_end > end)
            copy_end = end;
        if ((copy_start < end) && (copy_end > start)) {
            render_scanline_conditional_bitmap(copy_start, copy_end, copy_buffer, obj_enable, dispcnt, bldcnt, layer_renderers);
            copy_ptr = copy_buffer + copy_start;
        } else {
            continue;
        };
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 64)
                                        + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 64;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (max_x / 8) * 32)
                                        + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = (max_x / 8) * 32;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 32)
                        + ((vertical_offset % 8) * 4) + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * (obj_width / 8) * 64)
                        + ((vertical_offset % 8) * 8) + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};
static void render_scanline_obj_copy_bitmap_2D(u32 priority, u32 start, u32 end, u16 *scanline)
{
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    u16 dispcnt = (*(u16 *)((REG_BASE + 0x0)));
    u8 obj_enable = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 5)))) >> 8;
    BitmapLayerRenderStruct *layer_renderers = bitmap_mode_renderers + ((dispcnt & 0x07) - 3);
    u32 copy_start, copy_end;
    u16 __attribute__((aligned(64))) copy_buffer[240];
    u16 *copy_ptr;
    ;
    u32 obj_num, i;
    u16 obj_size;
    s32 obj_x, obj_y;
    u32 obj_width, obj_height;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u32 tile_run;
    u32 current_pixels;
    u32 current_pixel;
    u32 current_palette;
    u32 vertical_offset;
    u32 partial_tile_run, partial_tile_offset;
    u32 pixel_run;
    u16 *oam_ptr;
    u16 *dest_ptr;
    u8 *obj_tile_base = VRAM + 0x10000;
    u8 *tile_ptr;
    u8 obj_count = obj_priority_count[priority][vcount];
    u8 *obj_list = obj_priority_list[priority][vcount];
    for (obj_num = 0; obj_num < obj_count; obj_num++) {
        oam_ptr = OAM + (obj_list[obj_num] * 4);
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];
        obj_size = ((obj_attribute_0 >> 12) & 0x0C) | (obj_attribute_1 >> 14);
        obj_x = (s32)(obj_attribute_1 << 23) >> 23;
        obj_width = obj_width_table[obj_size];
        copy_start = obj_x;
        if ((obj_attribute_0 & 0x200) != 0)
            copy_end = obj_x + (obj_width << 1);
        else
            copy_end = obj_x + obj_width;
        if (copy_start < start)
            copy_start = start;
        if (copy_end > end)
            copy_end = end;
        if ((copy_start < end) && (copy_end > start)) {
            render_scanline_conditional_bitmap(copy_start, copy_end, copy_buffer, obj_enable, dispcnt, bldcnt, layer_renderers);
            copy_ptr = copy_buffer + copy_start;
        } else {
            continue;
        };
        obj_y = obj_attribute_0 & 0xFF;
        if (obj_y > 160) {
            obj_y -= 256;
        }
        obj_height = obj_height_table[obj_size];
        if ((obj_attribute_0 & 0x100) != 0) {
            if (((obj_attribute_0 >> 13) & 0x01) != 0) {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 8;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    ;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 64;
                                    current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07)];
                                    ;
                                    if (current_pixel != 0) {
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3Fe) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 64) + ((tile_y >> 3) * obj_tile_pitch);
                                current_pixel = tile_ptr[tile_map_offset + (tile_x & 0x07) + ((tile_y & 0x07) * obj_pitch)];
                                ;
                                if (current_pixel != 0) {
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            } else {
                {
                    s16 *params = (s16 *)(OAM + (((obj_attribute_1 >> 9) & 0x1F) * 16));
                    s32 dx = params[3];
                    s32 dmx = params[7];
                    s32 dy = params[11];
                    s32 dmy = params[15];
                    s32 source_x, source_y;
                    s32 tile_x, tile_y;
                    u32 tile_map_offset;
                    s32 middle_x;
                    s32 middle_y;
                    s32 max_x = obj_width;
                    s32 max_y = obj_height;
                    s32 y_delta;
                    u32 obj_pitch = 4;
                    u32 obj_tile_pitch;
                    middle_x = (obj_width >> 1);
                    middle_y = (obj_height >> 1);
                    source_x = (middle_x << 8);
                    source_y = (middle_y << 8);
                    if ((obj_attribute_0 & 0x200) != 0) {
                        obj_width <<= 1;
                        obj_height <<= 1;
                        middle_x <<= 1;
                        middle_y <<= 1;
                    }
                    if ((s32)obj_x < (s32)start) {
                        u32 x_delta = start - obj_x;
                        middle_x -= x_delta;
                        obj_width -= x_delta;
                        obj_x = start;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    if ((s32)(obj_x + obj_width) >= (s32)end) {
                        obj_width = end - obj_x;
                        if ((s32)obj_width <= 0)
                            continue;
                    }
                    dest_ptr = scanline + obj_x;
                    y_delta = vcount - (obj_y + middle_y);
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    if (dy == 0) {
                        {
                            u32 vertical_offset;
                            source_y += y_delta * dmy;
                            vertical_offset = (source_y >> 8);
                            if ((u32)vertical_offset < (u32)max_y) {
                                tile_ptr = obj_tile_base
                                    + ((((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4))
                                       & 0x7FFF);
                                source_x += (y_delta * dmx) - (middle_x * dx);
                                for (i = 0; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x < (u32)max_x)
                                        break;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                                for (; i < obj_width; i++) {
                                    tile_x = (source_x >> 8);
                                    if ((u32)tile_x >= (u32)max_x)
                                        break;
                                    tile_map_offset = (tile_x >> 3) * 32;
                                    if ((tile_x & 0x01) != 0) {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] >> 4;
                                    } else {
                                        current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03)] & 0x0F;
                                    };
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                    source_x += dx;
                                    dest_ptr += 1;
                                    copy_ptr += 1;
                                    ;
                                }
                            }
                        };
                    } else {
                        {
                            tile_ptr = obj_tile_base + ((obj_attribute_2 & 0x3FF) * 32);
                            obj_tile_pitch = 1024;
                            source_x += (y_delta * dmx) - (middle_x * dx);
                            source_y += (y_delta * dmy) - (middle_x * dy);
                            for (i = 0; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x < (u32)max_x) && ((u32)tile_y < (u32)max_y))
                                    break;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                            for (; i < obj_width; i++) {
                                tile_x = (source_x >> 8);
                                tile_y = (source_y >> 8);
                                if (((u32)tile_x >= (u32)max_x) || ((u32)tile_y >= (u32)max_y))
                                    break;
                                tile_map_offset = ((tile_x >> 3) * 32) + ((tile_y >> 3) * obj_tile_pitch);
                                if ((tile_x & 0x01) != 0) {
                                    current_pixel = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] >> 4;
                                } else {
                                    current_pixel
                                        = tile_ptr[tile_map_offset + ((tile_x >> 1) & 0x03) + ((tile_y & 0x07) * obj_pitch)] & 0x0F;
                                };
                                if (current_pixel != 0) {
                                    current_pixel |= current_palette;
                                    dest_ptr[0] = copy_ptr[0];
                                };
                                ;
                                source_x += dx;
                                source_y += dy;
                                dest_ptr += 1;
                                copy_ptr += 1;
                                ;
                            }
                        };
                    }
                };
            }
        } else {
            vertical_offset = vcount - obj_y;
            if (((obj_attribute_1 >> 13) & 0x01) != 0) {
                vertical_offset = obj_height - vertical_offset - 1;
            }
            switch (((obj_attribute_0 >> 12) & 0x02) | ((obj_attribute_1 >> 12) & 0x01)) {
                case 0x0: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0x0F;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0x0F;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset += 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x1: {
                    u32 obj_tile_offset;
                    current_palette = (obj_attribute_2 >> 8) & 0xF0;
                    obj_tile_offset = ((obj_attribute_2 & 0x3FF) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 4)
                        + (32 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 28;
                                                if (current_pixel != 0) {
                                                    current_pixel |= current_palette;
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 4;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            ;
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 28;
                                            if (current_pixel != 0) {
                                                current_pixel |= current_palette;
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 4;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        ;
                                        obj_tile_offset -= 32;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 32;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr) << (partial_tile_offset * 4);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[7] = copy_ptr[7];
                                        };
                                        current_pixel = (current_pixels >> 4) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[6] = copy_ptr[6];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[5] = copy_ptr[5];
                                        };
                                        current_pixel = (current_pixels >> 12) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[4] = copy_ptr[4];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[3] = copy_ptr[3];
                                        };
                                        current_pixel = (current_pixels >> 20) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[2] = copy_ptr[2];
                                        };
                                        current_pixel = (current_pixels >> 24) & 0x0F;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[1] = copy_ptr[1];
                                        };
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 32;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 28;
                                        if (current_pixel != 0) {
                                            current_pixel |= current_palette;
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 4;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[7] = copy_ptr[7];
                                    };
                                    current_pixel = (current_pixels >> 4) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[6] = copy_ptr[6];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[5] = copy_ptr[5];
                                    };
                                    current_pixel = (current_pixels >> 12) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[4] = copy_ptr[4];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[3] = copy_ptr[3];
                                    };
                                    current_pixel = (current_pixels >> 20) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[2] = copy_ptr[2];
                                    };
                                    current_pixel = (current_pixels >> 24) & 0x0F;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[1] = copy_ptr[1];
                                    };
                                    current_pixel = current_pixels >> 28;
                                    if (current_pixel != 0) {
                                        current_pixel |= current_palette;
                                        dest_ptr[0] = copy_ptr[0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 32;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x2: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8) + 0;
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels & 0xFF;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels >>= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels & 0xFF;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels >>= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels >>= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)(tile_ptr + 4));
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset += 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset += (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4)) >> ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)tile_ptr) >> (partial_tile_offset * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels >>= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset += 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset += 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr += 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels >>= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset += 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
                case 0x3: {
                    u32 obj_tile_offset;
                    ;
                    obj_tile_offset = ((obj_attribute_2 & 0x3Fe) * 32) + ((vertical_offset / 8) * 1024) + ((vertical_offset % 8) * 8)
                        + (64 * ((obj_width - 8) / 8));
                    if (obj_x < (s32)start) {
                        dest_ptr = scanline + start;
                        pixel_run = obj_width - (start - obj_x);
                        if ((s32)pixel_run > 0) {
                            if ((obj_x + obj_width) >= end) {
                                pixel_run = end - start;
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    if ((s32)pixel_run < (s32)partial_tile_run) {
                                        if ((s32)pixel_run > 0) {
                                            partial_tile_run = pixel_run;
                                            obj_tile_offset &= 0x7FFF;
                                            tile_ptr = obj_tile_base + obj_tile_offset;
                                            if (partial_tile_offset >= 4) {
                                                current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                                for (i = 0; i < partial_tile_run; i++) {
                                                    current_pixel = current_pixels >> 24;
                                                    if (current_pixel != 0) {
                                                        dest_ptr[0] = copy_ptr[0];
                                                    };
                                                    current_pixels <<= 8;
                                                    dest_ptr += 1;
                                                    copy_ptr += 1;
                                                    ;
                                                };
                                            } else {
                                                current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                                if ((partial_tile_offset + partial_tile_run) > 4) {
                                                    u32 old_run = partial_tile_run;
                                                    partial_tile_run = 4 - partial_tile_offset;
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                    partial_tile_run = old_run - partial_tile_run;
                                                    current_pixels = *((u32 *)(tile_ptr));
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                } else {
                                                    for (i = 0; i < partial_tile_run; i++) {
                                                        current_pixel = current_pixels >> 24;
                                                        if (current_pixel != 0) {
                                                            dest_ptr[0] = copy_ptr[0];
                                                        };
                                                        current_pixels <<= 8;
                                                        dest_ptr += 1;
                                                        copy_ptr += 1;
                                                        ;
                                                    };
                                                }
                                            };
                                            ;
                                        }
                                        continue;
                                    } else {
                                        pixel_run -= partial_tile_run;
                                        obj_tile_offset &= 0x7FFF;
                                        tile_ptr = obj_tile_base + obj_tile_offset;
                                        if (partial_tile_offset >= 4) {
                                            current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                        } else {
                                            partial_tile_run -= 4;
                                            current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                            for (i = 0; i < partial_tile_run; i++) {
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0] = copy_ptr[0];
                                                };
                                                current_pixels <<= 8;
                                                dest_ptr += 1;
                                                copy_ptr += 1;
                                                ;
                                            };
                                            current_pixels = *((u32 *)tile_ptr);
                                            if (current_pixels != 0) {
                                                current_pixel = current_pixels & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                                };
                                                current_pixel = (current_pixels >> 8) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                                };
                                                current_pixel = (current_pixels >> 16) & 0xFF;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                                };
                                                current_pixel = current_pixels >> 24;
                                                if (current_pixel != 0) {
                                                    dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                                };
                                                ;
                                            };
                                            dest_ptr += 4;
                                            copy_ptr += 4;
                                            ;
                                        };
                                        obj_tile_offset -= 64;
                                        ;
                                    }
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            } else {
                                partial_tile_offset = start - obj_x;
                                obj_tile_offset -= (partial_tile_offset / 8) * 64;
                                partial_tile_offset %= 8;
                                if (partial_tile_offset != 0) {
                                    partial_tile_run = 8 - partial_tile_offset;
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_offset >= 4) {
                                        current_pixels = *((u32 *)tile_ptr) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                    } else {
                                        partial_tile_run -= 4;
                                        current_pixels = *((u32 *)(tile_ptr + 4)) << ((partial_tile_offset - 4) * 8);
                                        for (i = 0; i < partial_tile_run; i++) {
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0] = copy_ptr[0];
                                            };
                                            current_pixels <<= 8;
                                            dest_ptr += 1;
                                            copy_ptr += 1;
                                            ;
                                        };
                                        current_pixels = *((u32 *)tile_ptr);
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                    };
                                    obj_tile_offset -= 64;
                                    ;
                                }
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                            }
                        }
                    } else {
                        if ((obj_x + obj_width) >= end) {
                            pixel_run = end - obj_x;
                            if ((s32)pixel_run > 0) {
                                dest_ptr = scanline + obj_x;
                                tile_run = pixel_run / 8;
                                for (i = 0; i < tile_run; i++) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                        };
                                        ;
                                    };
                                    current_pixels = *((u32 *)tile_ptr);
                                    if (current_pixels != 0) {
                                        current_pixel = current_pixels & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                        };
                                        current_pixel = (current_pixels >> 8) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                        };
                                        current_pixel = (current_pixels >> 16) & 0xFF;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                        };
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                        };
                                        ;
                                    };
                                    ;
                                    obj_tile_offset -= 64;
                                    dest_ptr += 8;
                                    copy_ptr += 8;
                                    ;
                                };
                                partial_tile_run = pixel_run % 8;
                                if (partial_tile_run != 0) {
                                    obj_tile_offset &= 0x7FFF;
                                    tile_ptr = obj_tile_base + obj_tile_offset;
                                    if (partial_tile_run >= 4) {
                                        current_pixels = *((u32 *)(tile_ptr + 4));
                                        if (current_pixels != 0) {
                                            current_pixel = current_pixels & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                            };
                                            current_pixel = (current_pixels >> 8) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                            };
                                            current_pixel = (current_pixels >> 16) & 0xFF;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                            };
                                            current_pixel = current_pixels >> 24;
                                            if (current_pixel != 0) {
                                                dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                            };
                                            ;
                                        };
                                        dest_ptr += 4;
                                        copy_ptr += 4;
                                        ;
                                        tile_ptr -= 4;
                                        partial_tile_run -= 4;
                                    }
                                    current_pixels = *((u32 *)(tile_ptr + 4));
                                    for (i = 0; i < partial_tile_run; i++) {
                                        current_pixel = current_pixels >> 24;
                                        if (current_pixel != 0) {
                                            dest_ptr[0] = copy_ptr[0];
                                        };
                                        current_pixels <<= 8;
                                        dest_ptr += 1;
                                        copy_ptr += 1;
                                        ;
                                    };
                                    ;
                                    ;
                                }
                            }
                        } else {
                            dest_ptr = scanline + obj_x;
                            tile_run = obj_width / 8;
                            for (i = 0; i < tile_run; i++) {
                                obj_tile_offset &= 0x7FFF;
                                tile_ptr = obj_tile_base + obj_tile_offset;
                                current_pixels = *((u32 *)(tile_ptr + 4));
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 3] = copy_ptr[0 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 2] = copy_ptr[0 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 1] = copy_ptr[0 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[0 + 0] = copy_ptr[0 + 0];
                                    };
                                    ;
                                };
                                current_pixels = *((u32 *)tile_ptr);
                                if (current_pixels != 0) {
                                    current_pixel = current_pixels & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 3] = copy_ptr[4 + 3];
                                    };
                                    current_pixel = (current_pixels >> 8) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 2] = copy_ptr[4 + 2];
                                    };
                                    current_pixel = (current_pixels >> 16) & 0xFF;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 1] = copy_ptr[4 + 1];
                                    };
                                    current_pixel = current_pixels >> 24;
                                    if (current_pixel != 0) {
                                        dest_ptr[4 + 0] = copy_ptr[4 + 0];
                                    };
                                    ;
                                };
                                ;
                                obj_tile_offset -= 64;
                                dest_ptr += 8;
                                copy_ptr += 8;
                                ;
                            };
                        }
                    }
                }; break;
            }
        };
    }
};

static void order_obj(u8 video_mode)
{
    s32 obj_num;
    s32 obj_x, obj_y, row;
    s32 obj_width, obj_height;
    u16 obj_size;
    u16 obj_priority, obj_mode;
    u16 obj_attribute_0, obj_attribute_1, obj_attribute_2;
    u16 current_count;
    u16 *oam_ptr = OAM + 508;

    __builtin___memset_chk(obj_priority_count, 0, 5 * 160, __builtin_object_size(obj_priority_count, 0));
    __builtin___memset_chk(obj_alpha_count, 0, 160, __builtin_object_size(obj_alpha_count, 0));

    for (obj_num = 127; obj_num >= 0; obj_num--, oam_ptr -= 4) {
        obj_attribute_0 = oam_ptr[0];
        obj_attribute_1 = oam_ptr[1];
        obj_attribute_2 = oam_ptr[2];

        obj_size = obj_attribute_0 & 0xC000;

        if (obj_size == 0xC000) {
            obj_size = 0x0000;
            obj_attribute_1 &= 0x3FFF;
        }

        obj_mode = (obj_attribute_0 >> 10) & 0x03;

        if (obj_mode == 3)
            obj_mode = 0;

        if (((obj_attribute_0 & 0x0300) != 0x0200) && ((video_mode < 3) || ((obj_attribute_2 & 0x3FF) >= 512))) {
            obj_y = obj_attribute_0 & 0xFF;
            if (obj_y > 160)
                obj_y -= 256;

            obj_size = (obj_size >> 12) | (obj_attribute_1 >> 14);
            obj_priority = (obj_attribute_2 >> 10) & 0x03;
            obj_height = obj_height_table[obj_size];
            obj_width = (s32)obj_width_table[obj_size];

            if ((obj_attribute_0 & 0x200) != 0) {
                obj_height <<= 1;
                obj_width <<= 1;
            }

            if (((obj_y + obj_height) > 0) && (obj_y < 160)) {
                obj_x = (s32)(obj_attribute_1 << 23) >> 23;

                if (((obj_x + obj_width) > 0) && (obj_x < 240)) {
                    if (obj_y < 0) {
                        obj_height += obj_y;
                        obj_y = 0;
                    }

                    if ((obj_y + obj_height) >= 160) {
                        obj_height = 160 - obj_y;
                    }

                    if (obj_mode == 1) {
                        for (row = obj_y; row < obj_y + obj_height; row++) {
                            current_count = obj_priority_count[obj_priority][row];
                            obj_priority_list[obj_priority][row][current_count] = obj_num;
                            obj_priority_count[obj_priority][row] = current_count + 1;
                            obj_alpha_count[row] = 1;
                        }
                    } else {
                        if (obj_mode == 2)
                            obj_priority = 4;

                        for (row = obj_y; row < obj_y + obj_height; row++) {
                            current_count = obj_priority_count[obj_priority][row];
                            obj_priority_list[obj_priority][row][current_count] = obj_num;
                            obj_priority_count[obj_priority][row] = current_count + 1;
                        }
                    }
                }
            }
        }
    }
}

static void order_layers(u8 layer_flags)
{
    s32 priority, layer_number;
    layer_count = 0;

    for (priority = 3; priority >= 0; priority--) {
        for (layer_number = 3; layer_number >= 0; layer_number--) {
            if (((layer_flags >> layer_number) & 1) && (((*(u16 *)((REG_BASE + 0x8) + layer_number)) & 0x03) == priority)) {
                layer_order[layer_count] = layer_number;
                layer_count++;
            }
        }

        if ((obj_priority_count[priority][(*(u16 *)((REG_BASE + 0x6)))] > 0) && ((layer_flags & 0x10) != 0)) {
            layer_order[layer_count] = priority | 0x04;
            layer_count++;
        }
    }
}

static void fill_line_normal(u16 color, u16 *dest_ptr, u32 start, u32 end)
{
    color = PLTT[color];
    u32 i;
    for (i = start; i < end; i++) {
        dest_ptr[i] = color;
    };
};
static void fill_line_alpha(u16 color, u32 *dest_ptr, u32 start, u32 end)
{
    ;
    u32 i;
    for (i = start; i < end; i++) {
        dest_ptr[i] = color;
    };
};
static void fill_line_color16(u16 color, u16 *dest_ptr, u32 start, u32 end)
{
    ;
    u32 i;
    for (i = start; i < end; i++) {
        dest_ptr[i] = color;
    };
};
static void fill_line_color32(u16 color, u32 *dest_ptr, u32 start, u32 end)
{
    ;
    u32 i;
    for (i = start; i < end; i++) {
        dest_ptr[i] = color;
    };
};

static void expand_blend(u32 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end)
{
    u32 pixel_pair;
    u32 pixel_top, pixel_bottom;
    u16 bldalpha = (*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2))));
    s32 blend_a = bldalpha & 0x1F;
    s32 blend_b = (bldalpha >> 8) & 0x1F;
    u32 i;

    blend_a = (((blend_a) > (16)) ? (blend_a) : (16));
    blend_b = (((blend_b) > (16)) ? (blend_b) : (16));

    if ((blend_a + blend_b) > 16) {
        screen_src_ptr += start;
        screen_dest_ptr += start;
        end -= start;
        for (i = 0; i < end; i++) {
            pixel_pair = *screen_src_ptr;
            if (((pixel_pair & 0x04000200) == 0x04000200) != 0) {
                pixel_top = PLTT[pixel_pair & 0x1FF];
                pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                pixel_bottom = PLTT[(pixel_pair >> 16) & 0x1FF];
                pixel_bottom = (pixel_bottom | (pixel_bottom << 16)) & 0x03E07C1F;
                pixel_top = ((pixel_top * blend_a) + (pixel_bottom * blend_b)) >> 4;
                if ((pixel_top & 0x04008020) != 0) {
                    if ((pixel_top & 0x04000000) != 0) {
                        pixel_top |= 0x03E00000;
                    }
                    if ((pixel_top & 0x00008000) != 0) {
                        pixel_top |= 0x00007C00;
                    }
                    if ((pixel_top & 0x00000020) != 0) {
                        pixel_top |= 0x0000001F;
                    }
                };
                pixel_top &= 0x03E07C1F;
                pixel_top = (pixel_top >> 16) | pixel_top;
                ;
                *screen_dest_ptr = pixel_top;
                ;
            } else {
                *screen_dest_ptr = PLTT[pixel_pair & 0x1FF];
            }
            screen_src_ptr++;
            screen_dest_ptr++;
        };
    } else {
        screen_src_ptr += start;
        screen_dest_ptr += start;
        end -= start;
        for (i = 0; i < end; i++) {
            pixel_pair = *screen_src_ptr;
            if (((pixel_pair & 0x04000200) == 0x04000200) != 0) {
                pixel_top = PLTT[pixel_pair & 0x1FF];
                pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                pixel_bottom = PLTT[(pixel_pair >> 16) & 0x1FF];
                pixel_bottom = (pixel_bottom | (pixel_bottom << 16)) & 0x03E07C1F;
                pixel_top = ((pixel_top * blend_a) + (pixel_bottom * blend_b)) >> 4;
                ;
                pixel_top &= 0x03E07C1F;
                pixel_top = (pixel_top >> 16) | pixel_top;
                ;
                *screen_dest_ptr = pixel_top;
                ;
            } else {
                *screen_dest_ptr = PLTT[pixel_pair & 0x1FF];
            }
            screen_src_ptr++;
            screen_dest_ptr++;
        };
    }
}

static void expand_darken(u16 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end)
{
    u32 pixel_top;
    s32 blend = 16 - ((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F);
    u32 i;

    blend = (((blend) < (0)) ? (blend) : (0));

    screen_src_ptr += start;
    screen_dest_ptr += start;
    end -= start;
    for (i = 0; i < end; i++) {
        pixel_top = *screen_src_ptr;
        if (((pixel_top & 0x00000200) == 0x00000200) != 0) {
            pixel_top = PLTT[pixel_top & 0x1FF];
            pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
            pixel_top = (pixel_top * blend) >> 4;
            pixel_top &= 0x03E07C1F;
            pixel_top = (pixel_top >> 16) | pixel_top;
            ;
            *screen_dest_ptr = pixel_top;
            ;
        } else {
            *screen_dest_ptr = PLTT[pixel_top & 0x1FF];
        }
        screen_src_ptr++;
        screen_dest_ptr++;
    };
}

static void expand_brighten(u16 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end)
{
    u32 pixel_top;
    s32 blend = (*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F;
    u32 upper;
    u32 i;

    blend = (((blend) > (16)) ? (blend) : (16));

    upper = ((0x03E07C1F * blend) >> 4) & 0x03E07C1F;
    blend = 16 - blend;

    screen_src_ptr += start;
    screen_dest_ptr += start;
    end -= start;
    for (i = 0; i < end; i++) {
        pixel_top = *screen_src_ptr;
        if (((pixel_top & 0x00000200) == 0x00000200) != 0) {
            pixel_top = PLTT[pixel_top & 0x1FF];
            pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
            pixel_top = upper + ((pixel_top * blend) >> 4);
            pixel_top &= 0x03E07C1F;
            pixel_top = (pixel_top >> 16) | pixel_top;
            ;
            *screen_dest_ptr = pixel_top;
            ;
        } else {
            *screen_dest_ptr = PLTT[pixel_top & 0x1FF];
        }
        screen_src_ptr++;
        screen_dest_ptr++;
    };
}

static void expand_darken_partial_alpha(u32 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end)
{
    s8 blend = 16 - ((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F);
    u32 pixel_pair;
    u32 pixel_top, pixel_bottom;
    u16 bldalpha = (*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2))));
    s32 blend_a = bldalpha & 0x1F;
    s32 blend_b = (bldalpha >> 8) & 0x1F;
    u32 i;

    blend = (((blend) < (0)) ? (blend) : (0));
    blend_a = (((blend_a) > (16)) ? (blend_a) : (16));
    blend_b = (((blend_b) > (16)) ? (blend_b) : (16));

    if ((blend_a + blend_b) > 16) {
        screen_src_ptr += start;
        screen_dest_ptr += start;
        end -= start;
        for (i = 0; i < end; i++) {
            pixel_pair = *screen_src_ptr;
            if (((pixel_pair & 0x00000200) == 0x00000200) != 0) {
                if (((pixel_pair & 0x04000200) == 0x04000200) != 0) {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_bottom = PLTT[(pixel_pair >> 16) & 0x1FF];
                    pixel_bottom = (pixel_bottom | (pixel_bottom << 16)) & 0x03E07C1F;
                    pixel_top = ((pixel_top * blend_a) + (pixel_bottom * blend_b)) >> 4;
                    if ((pixel_top & 0x04008020) != 0) {
                        if ((pixel_top & 0x04000000) != 0) {
                            pixel_top |= 0x03E00000;
                        }
                        if ((pixel_top & 0x00008000) != 0) {
                            pixel_top |= 0x00007C00;
                        }
                        if ((pixel_top & 0x00000020) != 0) {
                            pixel_top |= 0x0000001F;
                        }
                    };
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                } else {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_top = (pixel_top * blend) >> 4;
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                }
            } else {
                *screen_dest_ptr = PLTT[pixel_pair & 0x1FF];
            }
            screen_src_ptr++;
            screen_dest_ptr++;
        };
    } else {
        screen_src_ptr += start;
        screen_dest_ptr += start;
        end -= start;
        for (i = 0; i < end; i++) {
            pixel_pair = *screen_src_ptr;
            if (((pixel_pair & 0x00000200) == 0x00000200) != 0) {
                if (((pixel_pair & 0x04000200) == 0x04000200) != 0) {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_bottom = PLTT[(pixel_pair >> 16) & 0x1FF];
                    pixel_bottom = (pixel_bottom | (pixel_bottom << 16)) & 0x03E07C1F;
                    pixel_top = ((pixel_top * blend_a) + (pixel_bottom * blend_b)) >> 4;
                    ;
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                } else {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_top = (pixel_top * blend) >> 4;
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                }
            } else {
                *screen_dest_ptr = PLTT[pixel_pair & 0x1FF];
            }
            screen_src_ptr++;
            screen_dest_ptr++;
        };
    };
}

static void expand_brighten_partial_alpha(u32 *screen_src_ptr, u16 *screen_dest_ptr, u32 start, u32 end)
{
    s8 blend = (*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F;
    u32 pixel_pair;
    u32 pixel_top, pixel_bottom;
    u16 bldalpha = (*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2))));
    s32 blend_a = bldalpha & 0x1F;
    s32 blend_b = (bldalpha >> 8) & 0x1F;
    u32 upper;
    u32 i;

    blend = (((blend) > (16)) ? (blend) : (16));

    upper = ((0x03E07C1F * blend) >> 4) & 0x03E07C1F;
    blend = 16 - blend;

    blend_a = (((blend_a) > (16)) ? (blend_a) : (16));
    blend_b = (((blend_b) > (16)) ? (blend_b) : (16));

    if ((blend_a + blend_b) > 16) {
        screen_src_ptr += start;
        screen_dest_ptr += start;
        end -= start;
        for (i = 0; i < end; i++) {
            pixel_pair = *screen_src_ptr;
            if (((pixel_pair & 0x00000200) == 0x00000200) != 0) {
                if (((pixel_pair & 0x04000200) == 0x04000200) != 0) {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_bottom = PLTT[(pixel_pair >> 16) & 0x1FF];
                    pixel_bottom = (pixel_bottom | (pixel_bottom << 16)) & 0x03E07C1F;
                    pixel_top = ((pixel_top * blend_a) + (pixel_bottom * blend_b)) >> 4;
                    if ((pixel_top & 0x04008020) != 0) {
                        if ((pixel_top & 0x04000000) != 0) {
                            pixel_top |= 0x03E00000;
                        }
                        if ((pixel_top & 0x00008000) != 0) {
                            pixel_top |= 0x00007C00;
                        }
                        if ((pixel_top & 0x00000020) != 0) {
                            pixel_top |= 0x0000001F;
                        }
                    };
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                } else {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_top = upper + ((pixel_top * blend) >> 4);
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                }
            } else {
                *screen_dest_ptr = PLTT[pixel_pair & 0x1FF];
            }
            screen_src_ptr++;
            screen_dest_ptr++;
        };
    } else {
        screen_src_ptr += start;
        screen_dest_ptr += start;
        end -= start;
        for (i = 0; i < end; i++) {
            pixel_pair = *screen_src_ptr;
            if (((pixel_pair & 0x00000200) == 0x00000200) != 0) {
                if (((pixel_pair & 0x04000200) == 0x04000200) != 0) {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_bottom = PLTT[(pixel_pair >> 16) & 0x1FF];
                    pixel_bottom = (pixel_bottom | (pixel_bottom << 16)) & 0x03E07C1F;
                    pixel_top = ((pixel_top * blend_a) + (pixel_bottom * blend_b)) >> 4;
                    ;
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                } else {
                    pixel_top = PLTT[pixel_pair & 0x1FF];
                    pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                    pixel_top = upper + ((pixel_top * blend) >> 4);
                    pixel_top &= 0x03E07C1F;
                    pixel_top = (pixel_top >> 16) | pixel_top;
                    ;
                    *screen_dest_ptr = pixel_top;
                    ;
                }
            } else {
                *screen_dest_ptr = PLTT[pixel_pair & 0x1FF];
            }
            screen_src_ptr++;
            screen_dest_ptr++;
        };
    };
}

static void render_scanline_tile(u16 *scanline, u16 dispcnt)
{
    u8 current_layer;
    u32 layer_order_pos;
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    TileLayerRenderStruct *layer_renderers = tile_mode_renderers[dispcnt & 0x07];

    {
        if (layer_count != 0) {
            if (obj_alpha_count[(*(u16 *)((REG_BASE + 0x6)))] > 0) {
                u32 __attribute__((aligned(64))) screen_buffer[240];
                switch ((bldcnt >> 6) & 0x03) {
                    case 0x01: {
                        if (((((*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2)))) & 0x1F1F) != 0x001F)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x003F) != 0)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F00) != 0))
                            != 0) {
                            {
                                current_layer = layer_order[0];
                                if ((current_layer & 0x04) != 0) {
                                    fill_line_alpha(0, screen_buffer, 0, 240);
                                    current_layer &= ~0x04;
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_alpha_obj_1D(current_layer, 0, 240, screen_buffer);
                                    } else {
                                        render_scanline_obj_alpha_obj_2D(current_layer, 0, 240, screen_buffer);
                                    };
                                } else {
                                    layer_renderers[current_layer].alpha_render_base(current_layer, 0, 240, screen_buffer);
                                }
                                for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                                    current_layer = layer_order[layer_order_pos];
                                    if ((current_layer & 0x04) != 0) {
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_alpha_obj_1D(current_layer, 0, 240, screen_buffer);
                                        } else {
                                            render_scanline_obj_alpha_obj_2D(current_layer, 0, 240, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].alpha_render_transparent(current_layer, 0, 240, screen_buffer);
                                    }
                                }
                            };
                            expand_blend(screen_buffer, scanline, 0, 240);
                            return;
                        }
                        break;
                    }
                    case 0x02: {
                        if (((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0))
                            != 0) {
                            {
                                current_layer = layer_order[0];
                                if ((current_layer & 0x04) != 0) {
                                    fill_line_color32(0, screen_buffer, 0, 240);
                                    current_layer &= ~0x04;
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_partial_alpha_1D(current_layer, 0, 240, screen_buffer);
                                    } else {
                                        render_scanline_obj_partial_alpha_2D(current_layer, 0, 240, screen_buffer);
                                    };
                                } else {
                                    layer_renderers[current_layer].color32_render_base(current_layer, 0, 240, screen_buffer);
                                }
                                for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                                    current_layer = layer_order[layer_order_pos];
                                    if ((current_layer & 0x04) != 0) {
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_partial_alpha_1D(current_layer, 0, 240, screen_buffer);
                                        } else {
                                            render_scanline_obj_partial_alpha_2D(current_layer, 0, 240, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color32_render_transparent(current_layer, 0, 240, screen_buffer);
                                    }
                                }
                            };
                            expand_brighten_partial_alpha(screen_buffer, scanline, 0, 240);
                            return;
                        }
                        break;
                    }
                    case 0x03: {
                        if (((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0))
                            != 0) {
                            {
                                current_layer = layer_order[0];
                                if ((current_layer & 0x04) != 0) {
                                    fill_line_color32(0, screen_buffer, 0, 240);
                                    current_layer &= ~0x04;
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_partial_alpha_1D(current_layer, 0, 240, screen_buffer);
                                    } else {
                                        render_scanline_obj_partial_alpha_2D(current_layer, 0, 240, screen_buffer);
                                    };
                                } else {
                                    layer_renderers[current_layer].color32_render_base(current_layer, 0, 240, screen_buffer);
                                }
                                for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                                    current_layer = layer_order[layer_order_pos];
                                    if ((current_layer & 0x04) != 0) {
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_partial_alpha_1D(current_layer, 0, 240, screen_buffer);
                                        } else {
                                            render_scanline_obj_partial_alpha_2D(current_layer, 0, 240, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color32_render_transparent(current_layer, 0, 240, screen_buffer);
                                    }
                                }
                            };
                            expand_darken_partial_alpha(screen_buffer, scanline, 0, 240);
                            return;
                        }
                        break;
                    }
                }
                {
                    current_layer = layer_order[0];
                    if ((current_layer & 0x04) != 0) {
                        fill_line_color32(0, screen_buffer, 0, 240);
                        current_layer &= ~0x04;
                        if ((dispcnt & 0x40) != 0) {
                            render_scanline_obj_partial_alpha_1D(current_layer, 0, 240, screen_buffer);
                        } else {
                            render_scanline_obj_partial_alpha_2D(current_layer, 0, 240, screen_buffer);
                        };
                    } else {
                        layer_renderers[current_layer].color32_render_base(current_layer, 0, 240, screen_buffer);
                    }
                    for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                        current_layer = layer_order[layer_order_pos];
                        if ((current_layer & 0x04) != 0) {
                            current_layer &= ~0x04;
                            if ((dispcnt & 0x40) != 0) {
                                render_scanline_obj_partial_alpha_1D(current_layer, 0, 240, screen_buffer);
                            } else {
                                render_scanline_obj_partial_alpha_2D(current_layer, 0, 240, screen_buffer);
                            };
                        } else {
                            layer_renderers[current_layer].color32_render_transparent(current_layer, 0, 240, screen_buffer);
                        }
                    }
                };
                expand_blend(screen_buffer, scanline, 0, 240);
            } else {
                switch ((bldcnt >> 6) & 0x03) {
                    case 0x01: {
                        if (((((*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2)))) & 0x1F1F) != 0x001F)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x003F) != 0)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F00) != 0))
                            != 0) {
                            u32 __attribute__((aligned(64))) screen_buffer[240];
                            {
                                current_layer = layer_order[0];
                                if ((current_layer & 0x04) != 0) {
                                    fill_line_alpha(0, screen_buffer, 0, 240);
                                    current_layer &= ~0x04;
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_alpha_obj_1D(current_layer, 0, 240, screen_buffer);
                                    } else {
                                        render_scanline_obj_alpha_obj_2D(current_layer, 0, 240, screen_buffer);
                                    };
                                } else {
                                    layer_renderers[current_layer].alpha_render_base(current_layer, 0, 240, screen_buffer);
                                }
                                for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                                    current_layer = layer_order[layer_order_pos];
                                    if ((current_layer & 0x04) != 0) {
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_alpha_obj_1D(current_layer, 0, 240, screen_buffer);
                                        } else {
                                            render_scanline_obj_alpha_obj_2D(current_layer, 0, 240, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].alpha_render_transparent(current_layer, 0, 240, screen_buffer);
                                    }
                                }
                            };
                            expand_blend(screen_buffer, scanline, 0, 240);
                            return;
                        }
                        break;
                    }
                    case 0x02: {
                        if (((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0))
                            != 0) {
                            {
                                current_layer = layer_order[0];
                                if ((current_layer & 0x04) != 0) {
                                    fill_line_color16(0, scanline, 0, 240);
                                    current_layer &= ~0x04;
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_color16_1D(current_layer, 0, 240, scanline);
                                    } else {
                                        render_scanline_obj_color16_2D(current_layer, 0, 240, scanline);
                                    };
                                } else {
                                    layer_renderers[current_layer].color16_render_base(current_layer, 0, 240, scanline);
                                }
                                for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                                    current_layer = layer_order[layer_order_pos];
                                    if ((current_layer & 0x04) != 0) {
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_color16_1D(current_layer, 0, 240, scanline);
                                        } else {
                                            render_scanline_obj_color16_2D(current_layer, 0, 240, scanline);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color16_render_transparent(current_layer, 0, 240, scanline);
                                    }
                                }
                            };
                            expand_brighten(scanline, scanline, 0, 240);
                            return;
                        }
                        break;
                    }
                    case 0x03: {
                        if (((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                             && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0))
                            != 0) {
                            {
                                current_layer = layer_order[0];
                                if ((current_layer & 0x04) != 0) {
                                    fill_line_color16(0, scanline, 0, 240);
                                    current_layer &= ~0x04;
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_color16_1D(current_layer, 0, 240, scanline);
                                    } else {
                                        render_scanline_obj_color16_2D(current_layer, 0, 240, scanline);
                                    };
                                } else {
                                    layer_renderers[current_layer].color16_render_base(current_layer, 0, 240, scanline);
                                }
                                for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                                    current_layer = layer_order[layer_order_pos];
                                    if ((current_layer & 0x04) != 0) {
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_color16_1D(current_layer, 0, 240, scanline);
                                        } else {
                                            render_scanline_obj_color16_2D(current_layer, 0, 240, scanline);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color16_render_transparent(current_layer, 0, 240, scanline);
                                    }
                                }
                            };
                            expand_darken(scanline, scanline, 0, 240);
                            return;
                        }
                        break;
                    }
                }
                {
                    current_layer = layer_order[0];
                    if ((current_layer & 0x04) != 0) {
                        fill_line_normal(0, scanline, 0, 240);
                        current_layer &= ~0x04;
                        if ((dispcnt & 0x40) != 0) {
                            render_scanline_obj_normal_1D(current_layer, 0, 240, scanline);
                        } else {
                            render_scanline_obj_normal_2D(current_layer, 0, 240, scanline);
                        };
                    } else {
                        layer_renderers[current_layer].normal_render_base(current_layer, 0, 240, scanline);
                    }
                    for (layer_order_pos = 1; layer_order_pos < layer_count; layer_order_pos++) {
                        current_layer = layer_order[layer_order_pos];
                        if ((current_layer & 0x04) != 0) {
                            current_layer &= ~0x04;
                            if ((dispcnt & 0x40) != 0) {
                                render_scanline_obj_normal_1D(current_layer, 0, 240, scanline);
                            } else {
                                render_scanline_obj_normal_2D(current_layer, 0, 240, scanline);
                            };
                        } else {
                            layer_renderers[current_layer].normal_render_transparent(current_layer, 0, 240, scanline);
                        }
                    }
                };
                ;
            }
        } else {
            u32 pixel_top = PLTT[0];
            switch ((bldcnt >> 6) & 0x03) {
                case 0x02: {
                    if ((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01) != 0) {
                        u8 blend = (*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F;
                        u32 upper;
                        if (blend > 16) {
                            blend = 16;
                        }
                        upper = ((0x03E07C1F * blend) >> 4) & 0x03E07C1F;
                        blend = 16 - blend;
                        pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                        pixel_top = upper + ((pixel_top * blend) >> 4);
                        pixel_top &= 0x03E07C1F;
                        pixel_top = (pixel_top >> 16) | pixel_top;
                        ;
                    }
                    break;
                }
                case 0x03: {
                    if ((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01) != 0) {
                        s8 blend = 16 - ((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F);
                        if (blend < 0) {
                            blend = 0;
                        }
                        pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                        pixel_top = (pixel_top * blend) >> 4;
                        pixel_top &= 0x03E07C1F;
                        pixel_top = (pixel_top >> 16) | pixel_top;
                        ;
                    }
                    break;
                }
            }
            fill_line_color16(pixel_top, scanline, 0, 240);
        }
    };
}

static void render_scanline_bitmap(u16 *scanline, u16 dispcnt)
{

    BitmapLayerRenderStruct *layer_renderers = bitmap_mode_renderers + ((dispcnt & 0x07) - 3);
    u8 current_layer;
    u32 layer_order_pos;

    fill_line_normal(0, scanline, 0, 240);

    for (layer_order_pos = 0; layer_order_pos < layer_count; layer_order_pos++) {
        current_layer = layer_order[layer_order_pos];
        if ((current_layer & 0x04) != 0) {
            current_layer &= ~0x04;
            if ((dispcnt & 0x40) != 0) {
                render_scanline_obj_normal_1D(current_layer, 0, 240, scanline);
            } else {
                render_scanline_obj_normal_2D(current_layer, 0, 240, scanline);
            };
        } else {
            layer_renderers->normal_render(0, 240, scanline);
        }
    }
}

static void render_scanline_conditional_tile(u32 start, u32 end, u16 *scanline, u8 enable_flags, u16 dispcnt, u16 bldcnt,
                                             TileLayerRenderStruct *layer_renderers)
{
    u8 current_layer;
    u32 layer_order_pos = 0;

    {
        if ((layer_count && (enable_flags & 0x1F)) != 0) {
            if (obj_alpha_count[(*(u16 *)((REG_BASE + 0x6)))] > 0) {
                u32 __attribute__((aligned(64))) screen_buffer[240];
                switch ((bldcnt >> 6) & 0x03) {
                    case 0x01: {
                        if (((enable_flags & 0x20)
                             && ((((*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2)))) & 0x1F1F) != 0x001F)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x003F) != 0)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F00) != 0)))
                            != 0) {
                            {
                                __label__ skip;
                                current_layer = layer_order[layer_order_pos];
                                if ((enable_flags & 0x10) == 0) {
                                    while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_alpha(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    layer_renderers[current_layer].alpha_render_base(current_layer, start, end, screen_buffer);
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                            layer_renderers[current_layer].alpha_render_transparent(current_layer, start, end,
                                                                                                    screen_buffer);
                                        }
                                    }
                                } else {
                                    while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_alpha(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    if ((current_layer & 0x04) != 0) {
                                        fill_line_alpha(0, screen_buffer, start, end);
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_alpha_obj_1D(current_layer, start, end, screen_buffer);
                                        } else {
                                            render_scanline_obj_alpha_obj_2D(current_layer, start, end, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].alpha_render_base(current_layer, start, end, screen_buffer);
                                    }
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if ((current_layer & 0x04) != 0) {
                                            current_layer &= ~0x04;
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_alpha_obj_1D(current_layer, start, end, screen_buffer);
                                            } else {
                                                render_scanline_obj_alpha_obj_2D(current_layer, start, end, screen_buffer);
                                            };
                                        } else {
                                            if ((enable_flags & (1 << current_layer)) != 0) {
                                                layer_renderers[current_layer].alpha_render_transparent(current_layer, start, end,
                                                                                                        screen_buffer);
                                            }
                                        }
                                    }
                                }
                            skip:;
                            };
                            expand_blend(screen_buffer, scanline, start, end);
                            return;
                        }
                        break;
                    }
                    case 0x02: {
                        if (((enable_flags & 0x20)
                             && ((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0)))
                            != 0) {
                            {
                                __label__ skip;
                                current_layer = layer_order[layer_order_pos];
                                if ((enable_flags & 0x10) == 0) {
                                    while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color32(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    layer_renderers[current_layer].color32_render_base(current_layer, start, end, screen_buffer);
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                            layer_renderers[current_layer].color32_render_transparent(current_layer, start, end,
                                                                                                      screen_buffer);
                                        }
                                    }
                                } else {
                                    while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color32(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    if ((current_layer & 0x04) != 0) {
                                        fill_line_color32(0, screen_buffer, start, end);
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_partial_alpha_1D(current_layer, start, end, screen_buffer);
                                        } else {
                                            render_scanline_obj_partial_alpha_2D(current_layer, start, end, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color32_render_base(current_layer, start, end, screen_buffer);
                                    }
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if ((current_layer & 0x04) != 0) {
                                            current_layer &= ~0x04;
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_partial_alpha_1D(current_layer, start, end, screen_buffer);
                                            } else {
                                                render_scanline_obj_partial_alpha_2D(current_layer, start, end, screen_buffer);
                                            };
                                        } else {
                                            if ((enable_flags & (1 << current_layer)) != 0) {
                                                layer_renderers[current_layer].color32_render_transparent(current_layer, start, end,
                                                                                                          screen_buffer);
                                            }
                                        }
                                    }
                                }
                            skip:;
                            };
                            expand_brighten_partial_alpha(screen_buffer, scanline, start, end);
                            return;
                        }
                        break;
                    }
                    case 0x03: {
                        if (((enable_flags & 0x20)
                             && ((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0)))
                            != 0) {
                            {
                                __label__ skip;
                                current_layer = layer_order[layer_order_pos];
                                if ((enable_flags & 0x10) == 0) {
                                    while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color32(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    layer_renderers[current_layer].color32_render_base(current_layer, start, end, screen_buffer);
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                            layer_renderers[current_layer].color32_render_transparent(current_layer, start, end,
                                                                                                      screen_buffer);
                                        }
                                    }
                                } else {
                                    while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color32(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    if ((current_layer & 0x04) != 0) {
                                        fill_line_color32(0, screen_buffer, start, end);
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_partial_alpha_1D(current_layer, start, end, screen_buffer);
                                        } else {
                                            render_scanline_obj_partial_alpha_2D(current_layer, start, end, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color32_render_base(current_layer, start, end, screen_buffer);
                                    }
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if ((current_layer & 0x04) != 0) {
                                            current_layer &= ~0x04;
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_partial_alpha_1D(current_layer, start, end, screen_buffer);
                                            } else {
                                                render_scanline_obj_partial_alpha_2D(current_layer, start, end, screen_buffer);
                                            };
                                        } else {
                                            if ((enable_flags & (1 << current_layer)) != 0) {
                                                layer_renderers[current_layer].color32_render_transparent(current_layer, start, end,
                                                                                                          screen_buffer);
                                            }
                                        }
                                    }
                                }
                            skip:;
                            };
                            expand_darken_partial_alpha(screen_buffer, scanline, start, end);
                            return;
                        }
                        break;
                    }
                }
                {
                    __label__ skip;
                    current_layer = layer_order[layer_order_pos];
                    if ((enable_flags & 0x10) == 0) {
                        while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                            layer_order_pos++;
                            current_layer = layer_order[layer_order_pos];
                            if (layer_order_pos == layer_count) {
                                fill_line_color32(0, screen_buffer, start, end);
                                goto skip;
                            }
                        }
                        layer_renderers[current_layer].color32_render_base(current_layer, start, end, screen_buffer);
                        layer_order_pos++;
                        for (; layer_order_pos < layer_count; layer_order_pos++) {
                            current_layer = layer_order[layer_order_pos];
                            if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                layer_renderers[current_layer].color32_render_transparent(current_layer, start, end, screen_buffer);
                            }
                        }
                    } else {
                        while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                            layer_order_pos++;
                            current_layer = layer_order[layer_order_pos];
                            if (layer_order_pos == layer_count) {
                                fill_line_color32(0, screen_buffer, start, end);
                                goto skip;
                            }
                        }
                        if ((current_layer & 0x04) != 0) {
                            fill_line_color32(0, screen_buffer, start, end);
                            current_layer &= ~0x04;
                            if ((dispcnt & 0x40) != 0) {
                                render_scanline_obj_partial_alpha_1D(current_layer, start, end, screen_buffer);
                            } else {
                                render_scanline_obj_partial_alpha_2D(current_layer, start, end, screen_buffer);
                            };
                        } else {
                            layer_renderers[current_layer].color32_render_base(current_layer, start, end, screen_buffer);
                        }
                        layer_order_pos++;
                        for (; layer_order_pos < layer_count; layer_order_pos++) {
                            current_layer = layer_order[layer_order_pos];
                            if ((current_layer & 0x04) != 0) {
                                current_layer &= ~0x04;
                                if ((dispcnt & 0x40) != 0) {
                                    render_scanline_obj_partial_alpha_1D(current_layer, start, end, screen_buffer);
                                } else {
                                    render_scanline_obj_partial_alpha_2D(current_layer, start, end, screen_buffer);
                                };
                            } else {
                                if ((enable_flags & (1 << current_layer)) != 0) {
                                    layer_renderers[current_layer].color32_render_transparent(current_layer, start, end, screen_buffer);
                                }
                            }
                        }
                    }
                skip:;
                };
                expand_blend(screen_buffer, scanline, start, end);
            } else {
                switch ((bldcnt >> 6) & 0x03) {
                    case 0x01: {
                        if (((enable_flags & 0x20)
                             && ((((*(u16 *)((REG_BASE + (((0x40 + sizeof(winreg_t) * 6) + 4) + 2)))) & 0x1F1F) != 0x001F)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x003F) != 0)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F00) != 0)))
                            != 0) {
                            u32 __attribute__((aligned(64))) screen_buffer[240];
                            {
                                __label__ skip;
                                current_layer = layer_order[layer_order_pos];
                                if ((enable_flags & 0x10) == 0) {
                                    while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_alpha(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    layer_renderers[current_layer].alpha_render_base(current_layer, start, end, screen_buffer);
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                            layer_renderers[current_layer].alpha_render_transparent(current_layer, start, end,
                                                                                                    screen_buffer);
                                        }
                                    }
                                } else {
                                    while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_alpha(0, screen_buffer, start, end);
                                            goto skip;
                                        }
                                    }
                                    if ((current_layer & 0x04) != 0) {
                                        fill_line_alpha(0, screen_buffer, start, end);
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_alpha_obj_1D(current_layer, start, end, screen_buffer);
                                        } else {
                                            render_scanline_obj_alpha_obj_2D(current_layer, start, end, screen_buffer);
                                        };
                                    } else {
                                        layer_renderers[current_layer].alpha_render_base(current_layer, start, end, screen_buffer);
                                    }
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if ((current_layer & 0x04) != 0) {
                                            current_layer &= ~0x04;
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_alpha_obj_1D(current_layer, start, end, screen_buffer);
                                            } else {
                                                render_scanline_obj_alpha_obj_2D(current_layer, start, end, screen_buffer);
                                            };
                                        } else {
                                            if ((enable_flags & (1 << current_layer)) != 0) {
                                                layer_renderers[current_layer].alpha_render_transparent(current_layer, start, end,
                                                                                                        screen_buffer);
                                            }
                                        }
                                    }
                                }
                            skip:;
                            };
                            expand_blend(screen_buffer, scanline, start, end);
                            return;
                        }
                        break;
                    }
                    case 0x02: {
                        if (((enable_flags & 0x20)
                             && ((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0)))
                            != 0) {
                            {
                                __label__ skip;
                                current_layer = layer_order[layer_order_pos];
                                if ((enable_flags & 0x10) == 0) {
                                    while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color16(0, scanline, start, end);
                                            goto skip;
                                        }
                                    }
                                    layer_renderers[current_layer].color16_render_base(current_layer, start, end, scanline);
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                            layer_renderers[current_layer].color16_render_transparent(current_layer, start, end, scanline);
                                        }
                                    }
                                } else {
                                    while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color16(0, scanline, start, end);
                                            goto skip;
                                        }
                                    }
                                    if ((current_layer & 0x04) != 0) {
                                        fill_line_color16(0, scanline, start, end);
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_color16_1D(current_layer, start, end, scanline);
                                        } else {
                                            render_scanline_obj_color16_2D(current_layer, start, end, scanline);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color16_render_base(current_layer, start, end, scanline);
                                    }
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if ((current_layer & 0x04) != 0) {
                                            current_layer &= ~0x04;
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_color16_1D(current_layer, start, end, scanline);
                                            } else {
                                                render_scanline_obj_color16_2D(current_layer, start, end, scanline);
                                            };
                                        } else {
                                            if ((enable_flags & (1 << current_layer)) != 0) {
                                                layer_renderers[current_layer].color16_render_transparent(current_layer, start, end,
                                                                                                          scanline);
                                            }
                                        }
                                    }
                                }
                            skip:;
                            };
                            expand_brighten(scanline, scanline, start, end);
                            return;
                        }
                        break;
                    }
                    case 0x03: {
                        if (((enable_flags & 0x20)
                             && ((((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F) != 0)
                                 && (((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) & 0x3F) != 0)))
                            != 0) {
                            {
                                __label__ skip;
                                current_layer = layer_order[layer_order_pos];
                                if ((enable_flags & 0x10) == 0) {
                                    while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color16(0, scanline, start, end);
                                            goto skip;
                                        }
                                    }
                                    layer_renderers[current_layer].color16_render_base(current_layer, start, end, scanline);
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                            layer_renderers[current_layer].color16_render_transparent(current_layer, start, end, scanline);
                                        }
                                    }
                                } else {
                                    while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                                        layer_order_pos++;
                                        current_layer = layer_order[layer_order_pos];
                                        if (layer_order_pos == layer_count) {
                                            fill_line_color16(0, scanline, start, end);
                                            goto skip;
                                        }
                                    }
                                    if ((current_layer & 0x04) != 0) {
                                        fill_line_color16(0, scanline, start, end);
                                        current_layer &= ~0x04;
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_color16_1D(current_layer, start, end, scanline);
                                        } else {
                                            render_scanline_obj_color16_2D(current_layer, start, end, scanline);
                                        };
                                    } else {
                                        layer_renderers[current_layer].color16_render_base(current_layer, start, end, scanline);
                                    }
                                    layer_order_pos++;
                                    for (; layer_order_pos < layer_count; layer_order_pos++) {
                                        current_layer = layer_order[layer_order_pos];
                                        if ((current_layer & 0x04) != 0) {
                                            current_layer &= ~0x04;
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_color16_1D(current_layer, start, end, scanline);
                                            } else {
                                                render_scanline_obj_color16_2D(current_layer, start, end, scanline);
                                            };
                                        } else {
                                            if ((enable_flags & (1 << current_layer)) != 0) {
                                                layer_renderers[current_layer].color16_render_transparent(current_layer, start, end,
                                                                                                          scanline);
                                            }
                                        }
                                    }
                                }
                            skip:;
                            };
                            expand_darken(scanline, scanline, start, end);
                            return;
                        }
                        break;
                    }
                }
                {
                    __label__ skip;
                    current_layer = layer_order[layer_order_pos];
                    if ((enable_flags & 0x10) == 0) {
                        while (((current_layer & 0x04) != 0) || (((1 << current_layer) & enable_flags) == 0)) {
                            layer_order_pos++;
                            current_layer = layer_order[layer_order_pos];
                            if (layer_order_pos == layer_count) {
                                fill_line_normal(0, scanline, start, end);
                                goto skip;
                            }
                        }
                        layer_renderers[current_layer].normal_render_base(current_layer, start, end, scanline);
                        layer_order_pos++;
                        for (; layer_order_pos < layer_count; layer_order_pos++) {
                            current_layer = layer_order[layer_order_pos];
                            if (((current_layer & 0x04) == 0) && ((1 << current_layer) & enable_flags)) {
                                layer_renderers[current_layer].normal_render_transparent(current_layer, start, end, scanline);
                            }
                        }
                    } else {
                        while (!((current_layer & 0x04) || ((1 << current_layer) & enable_flags))) {
                            layer_order_pos++;
                            current_layer = layer_order[layer_order_pos];
                            if (layer_order_pos == layer_count) {
                                fill_line_normal(0, scanline, start, end);
                                goto skip;
                            }
                        }
                        if ((current_layer & 0x04) != 0) {
                            fill_line_normal(0, scanline, start, end);
                            current_layer &= ~0x04;
                            if ((dispcnt & 0x40) != 0) {
                                render_scanline_obj_normal_1D(current_layer, start, end, scanline);
                            } else {
                                render_scanline_obj_normal_2D(current_layer, start, end, scanline);
                            };
                        } else {
                            layer_renderers[current_layer].normal_render_base(current_layer, start, end, scanline);
                        }
                        layer_order_pos++;
                        for (; layer_order_pos < layer_count; layer_order_pos++) {
                            current_layer = layer_order[layer_order_pos];
                            if ((current_layer & 0x04) != 0) {
                                current_layer &= ~0x04;
                                if ((dispcnt & 0x40) != 0) {
                                    render_scanline_obj_normal_1D(current_layer, start, end, scanline);
                                } else {
                                    render_scanline_obj_normal_2D(current_layer, start, end, scanline);
                                };
                            } else {
                                if ((enable_flags & (1 << current_layer)) != 0) {
                                    layer_renderers[current_layer].normal_render_transparent(current_layer, start, end, scanline);
                                }
                            }
                        }
                    }
                skip:;
                };
                ;
            }
        } else {
            u32 pixel_top = PLTT[0];
            switch ((bldcnt >> 6) & 0x03) {
                case 0x02: {
                    if ((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01) != 0) {
                        u8 blend = (*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F;
                        u32 upper;
                        if (blend > 16) {
                            blend = 16;
                        }
                        upper = ((0x03E07C1F * blend) >> 4) & 0x03E07C1F;
                        blend = 16 - blend;
                        pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                        pixel_top = upper + ((pixel_top * blend) >> 4);
                        pixel_top &= 0x03E07C1F;
                        pixel_top = (pixel_top >> 16) | pixel_top;
                        ;
                    }
                    break;
                }
                case 0x03: {
                    if ((((*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4)))) >> 5) & 0x01) != 0) {
                        s8 blend = 16 - ((*(u16 *)((REG_BASE + ((((0x40 + sizeof(winreg_t) * 6) + 4) + 2) + 2)))) & 0x1F);
                        if (blend < 0) {
                            blend = 0;
                        }
                        pixel_top = (pixel_top | (pixel_top << 16)) & 0x03E07C1F;
                        pixel_top = (pixel_top * blend) >> 4;
                        pixel_top &= 0x03E07C1F;
                        pixel_top = (pixel_top >> 16) | pixel_top;
                        ;
                    }
                    break;
                }
            }
            fill_line_color16(pixel_top, scanline, start, end);
        }
    };
}

static void render_scanline_conditional_bitmap(u32 start, u32 end, u16 *scanline, u8 enable_flags, u16 dispcnt, u16 bldcnt,
                                               BitmapLayerRenderStruct *layer_renderers)
{
    u8 current_layer;
    u32 layer_order_pos;

    fill_line_normal(0, scanline, start, end);

    for (layer_order_pos = 0; layer_order_pos < layer_count; layer_order_pos++) {
        current_layer = layer_order[layer_order_pos];
        if ((current_layer & 0x04) != 0) {
            if ((enable_flags & 0x10) != 0) {
                current_layer &= ~0x04;
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_normal_1D(current_layer, start, end, scanline);
                } else {
                    render_scanline_obj_normal_2D(current_layer, start, end, scanline);
                };
            }
        } else {
            if ((enable_flags & 0x04) != 0) {
                layer_renderers->normal_render(start, end, scanline);
            }
        }
    }
}

static void render_scanline_window_tile(u16 *scanline, u16 dispcnt)
{
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u16 winin = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 4))));
    u16 winout = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 5))));
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    u16 window_out_enable = winout & 0x3F;
    TileLayerRenderStruct *layer_renderers = tile_mode_renderers[dispcnt & 0x07];
    switch (1) {
        case 0x01: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;

                if (0 != window_0_x2) {
                    render_scanline_conditional_tile(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                break;
                if (window_0_x2 != window_0_x1) {
                    render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                     layer_renderers);
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_tile(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;

                if (0 != window_0_x1) {
                    render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                break;
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_tile(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_0_x2 != 240) {
                    render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
            };
            break;
        }
        case 0x02: {
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            if (window_1_x1 > window_1_x2) {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                if (0 != window_1_x2) {
                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x2 != window_1_x1) {
                    render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                     layer_renderers);
                };
                if (window_1_x1 != 240) {
                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                if (0 != window_1_x1) {
                    render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 != window_1_x2) {
                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x2 != 240) {
                    render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
            };
            break;
        }
        case 0x03: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
            window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
            ;
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_tile(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    }
                } else {
                    if (window_0_x2 != window_0_x1) {
                        render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                         layer_renderers);
                    };
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_tile(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    }
                } else {
                    if (0 != window_0_x1) {
                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_tile(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (0 < 240) {
                                        render_scanline_conditional_tile(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (window_1_x2 < 240) {
                                        render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (0 < 240) {
                                        render_scanline_conditional_tile(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x2 < 240) {
                                        render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    }
                } else {
                    if (window_0_x2 != 240) {
                        render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                };
            };
            break;
        }
        case 0x04: {
            ;
            if (0 != 240) {
                render_scanline_conditional_tile(0, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
            };
            if ((dispcnt & 0x40) != 0) {
                render_scanline_obj_copy_tile_1D(4, 0, 240, scanline);
            } else {
                render_scanline_obj_copy_tile_2D(4, 0, 240, scanline);
            };
            break;
        }
        case 0x05: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_tile(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                ;
                if (window_0_x2 != window_0_x1) {
                    render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                     layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_tile_1D(4, window_0_x2, window_0_x1, scanline);
                } else {
                    render_scanline_obj_copy_tile_2D(4, window_0_x2, window_0_x1, scanline);
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_tile(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                ;
                if (0 != window_0_x1) {
                    render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                } else {
                    render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_tile(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                ;
                if (window_0_x2 != 240) {
                    render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                } else {
                    render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                };
            };
            break;
        }
        case 0x06: {
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            if (window_1_x1 > window_1_x2) {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                if (0 != window_1_x2) {
                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
                ;
                if (window_1_x2 != window_1_x1) {
                    render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                     layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_tile_1D(4, window_1_x2, window_1_x1, scanline);
                } else {
                    render_scanline_obj_copy_tile_2D(4, window_1_x2, window_1_x1, scanline);
                };
                if (window_1_x1 != 240) {
                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                ;
                if (0 != window_1_x1) {
                    render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_tile_1D(4, 0, window_1_x1, scanline);
                } else {
                    render_scanline_obj_copy_tile_2D(4, 0, window_1_x1, scanline);
                };
                if (window_1_x1 != window_1_x2) {
                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
                ;
                if (window_1_x2 != 240) {
                    render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_tile_1D(4, window_1_x2, 240, scanline);
                } else {
                    render_scanline_obj_copy_tile_2D(4, window_1_x2, 240, scanline);
                };
            };
            break;
        }
        case 0x07: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_tile(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (window_0_x2 != window_0_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != window_1_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, window_1_x2, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, window_1_x2, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (window_0_x2 != window_0_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        ;
                                        if (0 != window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (0 != window_1_x1) {
                                        render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, 0, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, 0, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            ;
                                            if (window_0_x2 != window_0_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                                            };
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != 240) {
                                        render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, window_1_x2, 240, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, window_1_x2, 240, scanline);
                                    };
                                }
                            }
                        };
                    }
                } else {
                    ;
                    if (window_0_x2 != window_0_x1) {
                        render_scanline_conditional_tile(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                         layer_renderers);
                    };
                    if ((dispcnt & 0x40) != 0) {
                        render_scanline_obj_copy_tile_1D(4, window_0_x2, window_0_x1, scanline);
                    } else {
                        render_scanline_obj_copy_tile_2D(4, window_0_x2, window_0_x1, scanline);
                    };
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_tile(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (0 != window_0_x1) {
                                                render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (0 != window_1_x1) {
                                                render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, 0, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, 0, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != window_1_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, window_1_x2, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, window_1_x2, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (0 != window_0_x1) {
                                                render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (0 != window_1_x1) {
                                                render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, 0, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, 0, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        ;
                                        if (0 != window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (0 != window_1_x1) {
                                        render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, 0, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, 0, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_tile(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_tile(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            ;
                                            if (0 != window_0_x1) {
                                                render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (0 != 240) {
                                                render_scanline_conditional_tile(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                                 layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, 0, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, 0, 240, scanline);
                                            };
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_tile(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != 240) {
                                        render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, window_1_x2, 240, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, window_1_x2, 240, scanline);
                                    };
                                }
                            }
                        };
                    }
                } else {
                    ;
                    if (0 != window_0_x1) {
                        render_scanline_conditional_tile(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                    if ((dispcnt & 0x40) != 0) {
                        render_scanline_obj_copy_tile_1D(4, 0, window_0_x1, scanline);
                    } else {
                        render_scanline_obj_copy_tile_2D(4, 0, window_0_x1, scanline);
                    };
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_tile(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (0 < 240) {
                                        render_scanline_conditional_tile(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (window_1_x2 < 240) {
                                        ;
                                        if (window_1_x2 != 240) {
                                            render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, window_1_x2, 240, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, window_1_x2, 240, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != window_1_x1) {
                                        render_scanline_conditional_tile(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                         bldcnt, layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, window_1_x2, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, window_1_x2, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_tile(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                 dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (0 < 240) {
                                        ;
                                        if (0 != 240) {
                                            render_scanline_conditional_tile(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, 0, 240, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, 0, 240, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (0 != window_1_x1) {
                                        render_scanline_conditional_tile(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, 0, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, 0, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_tile(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        } else {
                                            render_scanline_conditional_tile(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                             bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_tile(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_tile(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                     layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                 bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                                            };
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x2 < 240) {
                                        ;
                                        if (window_1_x2 != 240) {
                                            render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                             layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_tile_1D(4, window_1_x2, 240, scanline);
                                        } else {
                                            render_scanline_obj_copy_tile_2D(4, window_1_x2, 240, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != 240) {
                                        render_scanline_conditional_tile(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                         layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_tile_1D(4, window_1_x2, 240, scanline);
                                    } else {
                                        render_scanline_obj_copy_tile_2D(4, window_1_x2, 240, scanline);
                                    };
                                }
                            }
                        };
                    }
                } else {
                    ;
                    if (window_0_x2 != 240) {
                        render_scanline_conditional_tile(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                    if ((dispcnt & 0x40) != 0) {
                        render_scanline_obj_copy_tile_1D(4, window_0_x2, 240, scanline);
                    } else {
                        render_scanline_obj_copy_tile_2D(4, window_0_x2, 240, scanline);
                    };
                };
            };
            break;
        }
    }
};
static void render_scanline_window_bitmap(u16 *scanline, u16 dispcnt)
{
    u16 vcount = (*(u16 *)((REG_BASE + 0x6)));
    u16 winin = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 4))));
    u16 winout = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 5))));
    u16 bldcnt = (*(u16 *)((REG_BASE + ((0x40 + sizeof(winreg_t) * 6) + 4))));
    u16 window_out_enable = winout & 0x3F;
    BitmapLayerRenderStruct *layer_renderers = bitmap_mode_renderers + ((dispcnt & 0x07) - 3);
    switch (dispcnt >> 13) {
        case 0x01: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_bitmap(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_0_x2 != window_0_x1) {
                    render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_bitmap(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x1) {
                    render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_bitmap(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if (window_0_x2 != 240) {
                    render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
            };
            break;
        }
        case 0x02: {
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            if (window_1_x1 > window_1_x2) {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                if (0 != window_1_x2) {
                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x2 != window_1_x1) {
                    render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if (window_1_x1 != 240) {
                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                if (0 != window_1_x1) {
                    render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 != window_1_x2) {
                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if (window_1_x2 != 240) {
                    render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
            };
            break;
        }
        case 0x03: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
            window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
            ;
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_bitmap(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                       bldcnt, layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    }
                } else {
                    if (window_0_x2 != window_0_x1) {
                        render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                           layer_renderers);
                    };
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_bitmap(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                       bldcnt, layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    }
                } else {
                    if (0 != window_0_x1) {
                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_bitmap(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (0 < 240) {
                                        render_scanline_conditional_bitmap(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (window_1_x2 < 240) {
                                        render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                       bldcnt, layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (0 < 240) {
                                        render_scanline_conditional_bitmap(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x2 < 240) {
                                        render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    }
                } else {
                    if (window_0_x2 != 240) {
                        render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                };
            };
            break;
        }
        case 0x04: {
            ;
            if (0 != 240) {
                render_scanline_conditional_bitmap(0, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
            };
            if ((dispcnt & 0x40) != 0) {
                render_scanline_obj_copy_bitmap_1D(4, 0, 240, scanline);
            } else {
                render_scanline_obj_copy_bitmap_2D(4, 0, 240, scanline);
            };
            break;
        }
        case 0x05: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_bitmap(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                ;
                if (window_0_x2 != window_0_x1) {
                    render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_0_x1, scanline);
                } else {
                    render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_0_x1, scanline);
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_bitmap(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                ;
                if (0 != window_0_x1) {
                    render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                } else {
                    render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_bitmap(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                ;
                if (window_0_x2 != 240) {
                    render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                } else {
                    render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                };
            };
            break;
        }
        case 0x06: {
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            if (window_1_x1 > window_1_x2) {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                if (0 != window_1_x2) {
                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
                ;
                if (window_1_x2 != window_1_x1) {
                    render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_1_x1, scanline);
                } else {
                    render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_1_x1, scanline);
                };
                if (window_1_x1 != 240) {
                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_1_x1 = (((window_1_x1) > (240)) ? (window_1_x1) : (240));
                window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                ;
                ;
                if (0 != window_1_x1) {
                    render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_bitmap_1D(4, 0, window_1_x1, scanline);
                } else {
                    render_scanline_obj_copy_bitmap_2D(4, 0, window_1_x1, scanline);
                };
                if (window_1_x1 != window_1_x2) {
                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                ;
                if (window_1_x2 != 240) {
                    render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                };
                if ((dispcnt & 0x40) != 0) {
                    render_scanline_obj_copy_bitmap_1D(4, window_1_x2, 240, scanline);
                } else {
                    render_scanline_obj_copy_bitmap_2D(4, window_1_x2, 240, scanline);
                };
            };
            break;
        }
        case 0x07: {
            u8 window_0_x1, window_0_x2;
            u8 window_0_y1, window_0_y2;
            u8 window_0_enable = 0;
            window_0_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) >> 8;
            window_0_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 2)))) & 0xFF;
            if (window_0_y1 > window_0_y2) {
                if ((((vcount <= window_0_y2) || (vcount > window_0_y1)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            } else {
                if ((((vcount >= window_0_y1) && (vcount < window_0_y2)) || (window_0_y2 > 227)) && (window_0_y1 <= 227)) {
                    window_0_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) >> 8;
                    window_0_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 0)))) & 0xFF;
                    window_0_enable = (winin >> (0 << 3)) & 0x3F;
                    ;
                } else {
                    window_0_x1 = 240;
                    window_0_x2 = 240;
                }
            };
            u8 window_1_x1, window_1_x2;
            u8 window_1_y1, window_1_y2;
            u8 window_1_enable = 0;
            window_1_y1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) >> 8;
            window_1_y2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 3)))) & 0xFF;
            if (window_1_y1 > window_1_y2) {
                if ((((vcount <= window_1_y2) || (vcount > window_1_y1)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            } else {
                if ((((vcount >= window_1_y1) && (vcount < window_1_y2)) || (window_1_y2 > 227)) && (window_1_y1 <= 227)) {
                    window_1_x1 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) >> 8;
                    window_1_x2 = (*(u16 *)((REG_BASE + (0x40 + sizeof(winreg_t) * 1)))) & 0xFF;
                    window_1_enable = (winin >> (1 << 3)) & 0x3F;
                    ;
                } else {
                    window_1_x1 = 240;
                    window_1_x2 = 240;
                }
            };
            if (window_0_x1 > window_0_x2) {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (0 != window_0_x2) {
                    render_scanline_conditional_bitmap(0, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (window_0_x2 != window_0_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != window_1_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (window_0_x2 != window_0_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        ;
                                        if (0 != window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (0 != window_1_x1) {
                                        render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, 0, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, 0, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > window_0_x1) {
                                            ;
                                            if (window_0_x2 != window_0_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                                            };
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != 240) {
                                        render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, window_1_x2, 240, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, window_1_x2, 240, scanline);
                                    };
                                }
                            }
                        };
                    }
                } else {
                    ;
                    if (window_0_x2 != window_0_x1) {
                        render_scanline_conditional_bitmap(window_0_x2, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                           layer_renderers);
                    };
                    if ((dispcnt & 0x40) != 0) {
                        render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_0_x1, scanline);
                    } else {
                        render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_0_x1, scanline);
                    };
                };
                if (window_0_x1 != 240) {
                    render_scanline_conditional_bitmap(window_0_x1, 240, scanline, window_0_enable, dispcnt, bldcnt, layer_renderers);
                };
            } else {
                window_0_x1 = (((window_0_x1) > (240)) ? (window_0_x1) : (240));
                window_0_x2 = (((window_0_x2) > (240)) ? (window_0_x2) : (240));
                ;
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (0 != window_0_x1) {
                                                render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (0 != window_1_x1) {
                                                render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, 0, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, 0, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != window_1_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < 0) {
                                    if (window_1_x1 > 0) {
                                        if (window_1_x1 > window_0_x1) {
                                            ;
                                            if (0 != window_0_x1) {
                                                render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (0 != window_1_x1) {
                                                render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, 0, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, 0, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > window_0_x1) {
                                    if (0 < window_0_x1) {
                                        ;
                                        if (0 != window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (0 != window_1_x1) {
                                        render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, 0, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, 0, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < 0) {
                                    if (window_1_x2 > 0) {
                                        if (window_1_x2 > window_0_x1) {
                                            render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > window_0_x1) {
                                    if (window_1_x1 < window_0_x1) {
                                        render_scanline_conditional_bitmap(window_1_x1, window_0_x1, scanline, window_1_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < 0) {
                                    if (240 > 0) {
                                        if (240 > window_0_x1) {
                                            ;
                                            if (0 != window_0_x1) {
                                                render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                                            };
                                        } else {
                                            ;
                                            if (0 != 240) {
                                                render_scanline_conditional_bitmap(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                                   layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, 0, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, 0, 240, scanline);
                                            };
                                        }
                                    }
                                } else if (240 > window_0_x1) {
                                    if (window_1_x2 < window_0_x1) {
                                        ;
                                        if (window_1_x2 != window_0_x1) {
                                            render_scanline_conditional_bitmap(window_1_x2, window_0_x1, scanline, window_out_enable,
                                                                               dispcnt, bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_0_x1, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_0_x1, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != 240) {
                                        render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, window_1_x2, 240, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, window_1_x2, 240, scanline);
                                    };
                                }
                            }
                        };
                    }
                } else {
                    ;
                    if (0 != window_0_x1) {
                        render_scanline_conditional_bitmap(0, window_0_x1, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                    if ((dispcnt & 0x40) != 0) {
                        render_scanline_obj_copy_bitmap_1D(4, 0, window_0_x1, scanline);
                    } else {
                        render_scanline_obj_copy_bitmap_2D(4, 0, window_0_x1, scanline);
                    };
                };
                if (window_0_x1 != window_0_x2) {
                    render_scanline_conditional_bitmap(window_0_x1, window_0_x2, scanline, window_0_enable, dispcnt, bldcnt,
                                                       layer_renderers);
                };
                if (window_1_x1 < 240) {
                    if (window_1_x1 > window_1_x2) {
                        {
                            if (0 != window_1_x2) {
                                if (0 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (0 < 240) {
                                        render_scanline_conditional_bitmap(0, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(0, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != window_1_x1) {
                                if (window_1_x2 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (window_1_x2 < 240) {
                                        ;
                                        if (window_1_x2 != 240) {
                                            render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, window_1_x2, 240, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, window_1_x2, 240, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != window_1_x1) {
                                        render_scanline_conditional_bitmap(window_1_x2, window_1_x1, scanline, window_out_enable, dispcnt,
                                                                           bldcnt, layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, window_1_x2, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, window_1_x2, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != 240) {
                                if (window_1_x1 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                    } else {
                        window_1_x2 = (((window_1_x2) > (240)) ? (window_1_x2) : (240));
                        {
                            if (0 != window_1_x1) {
                                if (0 < window_0_x2) {
                                    if (window_1_x1 > window_0_x2) {
                                        if (window_1_x1 > 240) {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != window_1_x1) {
                                                render_scanline_conditional_bitmap(window_0_x2, window_1_x1, scanline, window_out_enable,
                                                                                   dispcnt, bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, window_1_x1, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, window_1_x1, scanline);
                                            };
                                        }
                                    }
                                } else if (window_1_x1 > 240) {
                                    if (0 < 240) {
                                        ;
                                        if (0 != 240) {
                                            render_scanline_conditional_bitmap(0, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, 0, 240, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, 0, 240, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (0 != window_1_x1) {
                                        render_scanline_conditional_bitmap(0, window_1_x1, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, 0, window_1_x1, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, 0, window_1_x1, scanline);
                                    };
                                }
                            }
                        };
                        {
                            if (window_1_x1 != window_1_x2) {
                                if (window_1_x1 < window_0_x2) {
                                    if (window_1_x2 > window_0_x2) {
                                        if (window_1_x2 > 240) {
                                            render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                               layer_renderers);
                                        } else {
                                            render_scanline_conditional_bitmap(window_0_x2, window_1_x2, scanline, window_1_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        }
                                    }
                                } else if (window_1_x2 > 240) {
                                    if (window_1_x1 < 240) {
                                        render_scanline_conditional_bitmap(window_1_x1, 240, scanline, window_1_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    }
                                } else {
                                    render_scanline_conditional_bitmap(window_1_x1, window_1_x2, scanline, window_1_enable, dispcnt, bldcnt,
                                                                       layer_renderers);
                                }
                            }
                        };
                        {
                            if (window_1_x2 != 240) {
                                if (window_1_x2 < window_0_x2) {
                                    if (240 > window_0_x2) {
                                        if (240 > 240) {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                                            };
                                        } else {
                                            ;
                                            if (window_0_x2 != 240) {
                                                render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt,
                                                                                   bldcnt, layer_renderers);
                                            };
                                            if ((dispcnt & 0x40) != 0) {
                                                render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                                            } else {
                                                render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                                            };
                                        }
                                    }
                                } else if (240 > 240) {
                                    if (window_1_x2 < 240) {
                                        ;
                                        if (window_1_x2 != 240) {
                                            render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt,
                                                                               bldcnt, layer_renderers);
                                        };
                                        if ((dispcnt & 0x40) != 0) {
                                            render_scanline_obj_copy_bitmap_1D(4, window_1_x2, 240, scanline);
                                        } else {
                                            render_scanline_obj_copy_bitmap_2D(4, window_1_x2, 240, scanline);
                                        };
                                    }
                                } else {
                                    ;
                                    if (window_1_x2 != 240) {
                                        render_scanline_conditional_bitmap(window_1_x2, 240, scanline, window_out_enable, dispcnt, bldcnt,
                                                                           layer_renderers);
                                    };
                                    if ((dispcnt & 0x40) != 0) {
                                        render_scanline_obj_copy_bitmap_1D(4, window_1_x2, 240, scanline);
                                    } else {
                                        render_scanline_obj_copy_bitmap_2D(4, window_1_x2, 240, scanline);
                                    };
                                }
                            }
                        };
                    }
                } else {
                    ;
                    if (window_0_x2 != 240) {
                        render_scanline_conditional_bitmap(window_0_x2, 240, scanline, window_out_enable, dispcnt, bldcnt, layer_renderers);
                    };
                    if ((dispcnt & 0x40) != 0) {
                        render_scanline_obj_copy_bitmap_1D(4, window_0_x2, 240, scanline);
                    } else {
                        render_scanline_obj_copy_bitmap_2D(4, window_0_x2, 240, scanline);
                    };
                };
            };
            break;
        }
    }
};

#include <stdio.h>

void update_scanline(void)
{

    u16 dispcnt = (*(u16 *)((REG_BASE + 0x0)));
    u16 *screen_offset = screen_texture + ((*(u16 *)((REG_BASE + 0x6))) << 8);
    u8 video_mode = dispcnt & 0x07;

    order_obj(video_mode);

    order_layers((dispcnt >> 8) & active_layers[video_mode]);
    int count = REG_VCOUNT;
    printf("%d\n", count);

    if ((dispcnt & 0x80) != 0) {
        fill_line_color16(0x7FFF, screen_offset, 0, 240);
    } else {
        if (video_mode < 3) {
            if ((dispcnt >> 13) != 0) {
                // render_scanline_window_tile(screen_offset, dispcnt);
            } else {

                render_scanline_tile(screen_offset, dispcnt);
            }
        } else {
            if ((dispcnt >> 13) != 0) {
                // render_scanline_window_bitmap(screen_offset, dispcnt);
            } else {
                // render_scanline_bitmap(screen_offset, dispcnt);
            }
        }
    }

    affine_reference_x[0] += *((s16 *)(REG_BASE + 0x22));
    affine_reference_y[0] += *((s16 *)(REG_BASE + 0x26));
    affine_reference_x[1] += *((s16 *)(REG_BASE + 0x32));
    affine_reference_y[1] += *((s16 *)(REG_BASE + 0x36));
}

void clear_texture(u16 color)
{
    u32 *p_dest = (u32 *)screen_texture;
    u32 color32 = color | (color << 16);

    while (p_dest != (u32 *)(screen_texture + (240) * (160))) {
        u32 *p_dest_max = p_dest + ((240) / 2);

        while (p_dest != p_dest_max)
            *p_dest++ = color32;

        p_dest += ((240) - (240)) / 2;
    }
}
